{"version":3,"sources":["webpack:///./node_modules/core-js/internals/function-bind.js","webpack:///./node_modules/core-js/modules/es.object.set-prototype-of.js","webpack:///./src/components/ProcessStepRulesetList.vue?67f6","webpack:///./node_modules/core-js/modules/es.object.get-prototype-of.js","webpack:///./node_modules/@babel/runtime/helpers/esm/arrayWithHoles.js","webpack:///./node_modules/@babel/runtime/helpers/esm/iterableToArrayLimit.js","webpack:///./node_modules/@babel/runtime/helpers/esm/nonIterableRest.js","webpack:///./node_modules/@babel/runtime/helpers/esm/slicedToArray.js","webpack:///./node_modules/core-js/modules/es.reflect.construct.js","webpack:///./node_modules/@babel/runtime/helpers/typeof.js","webpack:///./src/components/ProcessRulesetTable.vue?9090","webpack:///./node_modules/core-js/modules/es.object.create.js","webpack:///./src/views/Assessment.vue?cecd","webpack:///./src/immigration/step-rules/base.ts","webpack:///./src/components/ProcessRulesetTable.vue?0b7a","webpack:///./src/components/ProcessStepRulesetList.vue?cda9","webpack:///./src/components/ProcessStepRulesetList.vue","webpack:///./src/components/ProcessStepRulesetList.vue?e4b2","webpack:///./src/components/ProcessStepRulesetList.vue?eb2e","webpack:///./src/components/ProcessRulesetTable.vue","webpack:///./src/components/ProcessRulesetTable.vue?0a80","webpack:///./src/components/ProcessRulesetTable.vue?ca91","webpack:///./node_modules/@babel/runtime/helpers/esm/setPrototypeOf.js","webpack:///./node_modules/@babel/runtime/helpers/esm/inherits.js","webpack:///./node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js","webpack:///./node_modules/@babel/runtime/helpers/esm/isNativeReflectConstruct.js","webpack:///./node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js","webpack:///./node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js","webpack:///./node_modules/@babel/runtime/helpers/esm/createSuper.js","webpack:///./src/immigration/rules/contract-location.ts","webpack:///./src/immigration/rules/payroll-location.ts","webpack:///./src/immigration/rules/salary.ts","webpack:///./src/immigration/rules/duration.ts","webpack:///./src/immigration/rules/nationalities.ts","webpack:///./src/views/Assessment.vue","webpack:///./src/views/Assessment.vue?30a7","webpack:///./src/views/Assessment.vue?2d04"],"names":["aFunction","isObject","slice","factories","construct","C","argsLength","args","list","i","Function","join","module","exports","bind","that","fn","this","partArgs","call","arguments","boundFunction","concat","length","apply","prototype","$","setPrototypeOf","target","stat","fails","toObject","nativeGetPrototypeOf","CORRECT_PROTOTYPE_GETTER","FAILS_ON_PRIMITIVES","forced","sham","getPrototypeOf","it","_arrayWithHoles","arr","Array","isArray","_iterableToArrayLimit","_i","Symbol","iterator","_s","_e","_arr","_n","_d","next","done","push","value","err","_nonIterableRest","TypeError","_slicedToArray","arrayWithHoles","iterableToArrayLimit","unsupportedIterableToArray","nonIterableRest","getBuiltIn","anObject","create","nativeConstruct","NEW_TARGET_BUG","F","ARGS_BUG","FORCED","Target","newTarget","$args","proto","instance","Object","result","_typeof","obj","__esModule","constructor","DESCRIPTORS","StepRule","render","_vm","_h","$createElement","_c","_self","staticClass","_v","attrs","case_","caseSpec","processRuleSets","staticStyle","_b","move","targetEntryDate","targetExitDate","processSpec","makeProcessRuleSetTdAttrs","staticRenderFns","ref","rows","paginated","on","row","$emit","scopedSlots","_u","key","props","process","step_rulesets","dates","columnSpec","nationalitiesRuleTdAttrs","_explanation","proxy","nationalities_description","durationRuleTdAttrs","_result","RuleEvaluationResult","DoesNotApply","duration_min_days","duration_max_days","contractLocationRuleTdAttrs","contract_location","payrollLocationRuleTdAttrs","payroll_location","salaryRuleTdAttrs","minimum_salary","minimum_salary_currency","style","routeTdAttrs","route","index","_l","step","sequence_number","getStepClass","class","_class","process_step","name","processStepRuleSet","results","Map","set","Nationalities","evaluateNationalitiesRule","Set","required_only_if_nationalities","nationalities","ContractLocation","evaluateContractOrPayrollLocationRule","required_only_if_contract_location","PayrollLocation","required_only_if_payroll_location","Duration","evaluateDurationRule","required_only_if_duration_greater_than","required_only_if_duration_less_than","ruleMin","ruleMax","testEntryDate","testExitDate","duration","Fail","Pass","InsufficientInput","ruleLocation","testLocation","ruleNationalities","testNationalities","size","country","has","extend","stepRulesets","data","rule2InputFieldName","HomeCountries","rule2RuleName","methods","rules","rule2result","evaluate","result2rules","_invertMap","enListRules","get","enListFields","map","r","entries","rule","component","caseSpecs","type","Boolean","default","components","EditableRoute","ProcessStepRulesetList","ProcessStepsGantt","property","editable","disabled","_setPrototypeOf","o","p","__proto__","_inherits","subClass","superClass","writable","configurable","_getPrototypeOf","_isNativeReflectConstruct","Reflect","Proxy","valueOf","e","_assertThisInitialized","self","ReferenceError","_possibleConstructorReturn","assertThisInitialized","_createSuper","Derived","hasNativeReflectConstruct","isNativeReflectConstruct","Super","NewTarget","possibleConstructorReturn","contractLocation","isApplicable","intersects","processRuleSet","explanation","payrollLocation","salary","salaryCurrency","minimumText","satisfiesMinimum","maximumText","satisfiesMaximum","q","_formatExplanation","filter","ret","undefined","nationalitiesDescription","code","c","Case","ProcessRulesetTable","hostCountry","applicant","dateRange","contractLocationRule","durationRule","nationalitiesRule","payrollLocationRule","salaryRule","ruleEvaluationResults","ruleEvaluationResult2CssClass","Salary","created","$on","handleUpdateHostCountry","handleUpdateApplicant","handleUpdateDateRange","handleUpdateValue","handleUpdateSalary","computed","assign","host_country","fetchProcessRuleSets","triggerProcessRuleSetsIntersectionCalculations","entryDate","exitDate","target_entry_date","target_exit_date","text","id","http","fetchDataOrNull","uuid","salary_currency","fail","insufficientInput","pass"],"mappings":"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","file":"js/chunk-0d0afe67.f57eef1f.js","sourcesContent":["'use strict';\nvar aFunction = require('../internals/a-function');\nvar isObject = require('../internals/is-object');\n\nvar slice = [].slice;\nvar factories = {};\n\nvar construct = function (C, argsLength, args) {\n  if (!(argsLength in factories)) {\n    for (var list = [], i = 0; i < argsLength; i++) list[i] = 'a[' + i + ']';\n    // eslint-disable-next-line no-new-func -- we have no proper alternatives, IE8- only\n    factories[argsLength] = Function('C,a', 'return new C(' + list.join(',') + ')');\n  } return factories[argsLength](C, args);\n};\n\n// `Function.prototype.bind` method implementation\n// https://tc39.es/ecma262/#sec-function.prototype.bind\nmodule.exports = Function.bind || function bind(that /* , ...args */) {\n  var fn = aFunction(this);\n  var partArgs = slice.call(arguments, 1);\n  var boundFunction = function bound(/* args... */) {\n    var args = partArgs.concat(slice.call(arguments));\n    return this instanceof boundFunction ? construct(fn, args.length, args) : fn.apply(that, args);\n  };\n  if (isObject(fn.prototype)) boundFunction.prototype = fn.prototype;\n  return boundFunction;\n};\n","var $ = require('../internals/export');\nvar setPrototypeOf = require('../internals/object-set-prototype-of');\n\n// `Object.setPrototypeOf` method\n// https://tc39.es/ecma262/#sec-object.setprototypeof\n$({ target: 'Object', stat: true }, {\n  setPrototypeOf: setPrototypeOf\n});\n","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ProcessStepRulesetList.vue?vue&type=style&index=0&id=734ef6f5&scoped=true&lang=css&\"","var $ = require('../internals/export');\nvar fails = require('../internals/fails');\nvar toObject = require('../internals/to-object');\nvar nativeGetPrototypeOf = require('../internals/object-get-prototype-of');\nvar CORRECT_PROTOTYPE_GETTER = require('../internals/correct-prototype-getter');\n\nvar FAILS_ON_PRIMITIVES = fails(function () { nativeGetPrototypeOf(1); });\n\n// `Object.getPrototypeOf` method\n// https://tc39.es/ecma262/#sec-object.getprototypeof\n$({ target: 'Object', stat: true, forced: FAILS_ON_PRIMITIVES, sham: !CORRECT_PROTOTYPE_GETTER }, {\n  getPrototypeOf: function getPrototypeOf(it) {\n    return nativeGetPrototypeOf(toObject(it));\n  }\n});\n\n","export default function _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}","export default function _iterableToArrayLimit(arr, i) {\n  var _i = arr && (typeof Symbol !== \"undefined\" && arr[Symbol.iterator] || arr[\"@@iterator\"]);\n\n  if (_i == null) return;\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n\n  var _s, _e;\n\n  try {\n    for (_i = _i.call(arr); !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n\n  return _arr;\n}","export default function _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}","import arrayWithHoles from \"./arrayWithHoles.js\";\nimport iterableToArrayLimit from \"./iterableToArrayLimit.js\";\nimport unsupportedIterableToArray from \"./unsupportedIterableToArray.js\";\nimport nonIterableRest from \"./nonIterableRest.js\";\nexport default function _slicedToArray(arr, i) {\n  return arrayWithHoles(arr) || iterableToArrayLimit(arr, i) || unsupportedIterableToArray(arr, i) || nonIterableRest();\n}","var $ = require('../internals/export');\nvar getBuiltIn = require('../internals/get-built-in');\nvar aFunction = require('../internals/a-function');\nvar anObject = require('../internals/an-object');\nvar isObject = require('../internals/is-object');\nvar create = require('../internals/object-create');\nvar bind = require('../internals/function-bind');\nvar fails = require('../internals/fails');\n\nvar nativeConstruct = getBuiltIn('Reflect', 'construct');\n\n// `Reflect.construct` method\n// https://tc39.es/ecma262/#sec-reflect.construct\n// MS Edge supports only 2 arguments and argumentsList argument is optional\n// FF Nightly sets third argument as `new.target`, but does not create `this` from it\nvar NEW_TARGET_BUG = fails(function () {\n  function F() { /* empty */ }\n  return !(nativeConstruct(function () { /* empty */ }, [], F) instanceof F);\n});\nvar ARGS_BUG = !fails(function () {\n  nativeConstruct(function () { /* empty */ });\n});\nvar FORCED = NEW_TARGET_BUG || ARGS_BUG;\n\n$({ target: 'Reflect', stat: true, forced: FORCED, sham: FORCED }, {\n  construct: function construct(Target, args /* , newTarget */) {\n    aFunction(Target);\n    anObject(args);\n    var newTarget = arguments.length < 3 ? Target : aFunction(arguments[2]);\n    if (ARGS_BUG && !NEW_TARGET_BUG) return nativeConstruct(Target, args, newTarget);\n    if (Target == newTarget) {\n      // w/o altered newTarget, optimization for 0-4 arguments\n      switch (args.length) {\n        case 0: return new Target();\n        case 1: return new Target(args[0]);\n        case 2: return new Target(args[0], args[1]);\n        case 3: return new Target(args[0], args[1], args[2]);\n        case 4: return new Target(args[0], args[1], args[2], args[3]);\n      }\n      // w/o altered newTarget, lot of arguments case\n      var $args = [null];\n      $args.push.apply($args, args);\n      return new (bind.apply(Target, $args))();\n    }\n    // with altered newTarget, not support built-in constructors\n    var proto = newTarget.prototype;\n    var instance = create(isObject(proto) ? proto : Object.prototype);\n    var result = Function.apply.call(Target, instance, args);\n    return isObject(result) ? result : instance;\n  }\n});\n","function _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n    module.exports = _typeof = function _typeof(obj) {\n      return typeof obj;\n    };\n\n    module.exports[\"default\"] = module.exports, module.exports.__esModule = true;\n  } else {\n    module.exports = _typeof = function _typeof(obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n\n    module.exports[\"default\"] = module.exports, module.exports.__esModule = true;\n  }\n\n  return _typeof(obj);\n}\n\nmodule.exports = _typeof;\nmodule.exports[\"default\"] = module.exports, module.exports.__esModule = true;","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ProcessRulesetTable.vue?vue&type=style&index=0&lang=css&\"","var $ = require('../internals/export');\nvar DESCRIPTORS = require('../internals/descriptors');\nvar create = require('../internals/object-create');\n\n// `Object.create` method\n// https://tc39.es/ecma262/#sec-object.create\n$({ target: 'Object', stat: true, sham: !DESCRIPTORS }, {\n  create: create\n});\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('section',{staticClass:\"section\"},[_c('h1',{staticClass:\"subtitle\"},[_vm._v(\" Enter the information for your move. Matching immigration options will appear below. \")]),_c('case',{attrs:{\"case_\":_vm.case_,\"caseSpec\":_vm.caseSpec,\"showClient\":false}}),_c('br'),_c('br'),(_vm.processRuleSets.length > 0)?_c('div',{staticClass:\"card mt-6\",staticStyle:{\"overflow\":\"visible\"}},[_c('process-ruleset-table',_vm._b({attrs:{\"move\":_vm.move,\"dates\":[_vm.targetEntryDate, _vm.targetExitDate],\"rows\":_vm.processRuleSets,\"columnSpec\":_vm.processSpec,\"caseSpecs\":[_vm.processSpec],\"focusable\":false,\"paginated\":false}},'process-ruleset-table',_vm.makeProcessRuleSetTdAttrs(),false))],1):_vm._e()],1)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import {\n  Country,\n  ProcessStepRuleSet,\n} from \"../../pydantic-autogenerated-interfaces\";\nimport { MoveSerializer } from \"../../autogenerated-interfaces\";\nimport { RuleEvaluationResult } from \"@/immigration/rules/base\";\n\nexport enum StepRule {\n  Nationalities,\n  HomeCountries,\n  Duration,\n  ContractLocation,\n  PayrollLocation,\n}\n\nexport class StepRules {\n  processStepRuleSet: ProcessStepRuleSet;\n  constructor(processStepRuleSet: ProcessStepRuleSet) {\n    this.processStepRuleSet = processStepRuleSet;\n  }\n\n  evaluate(\n    move: MoveSerializer,\n    dates: [Date, Date]\n  ): Map<StepRule, RuleEvaluationResult> {\n    const results = new Map();\n    results.set(\n      StepRule.Nationalities,\n      this.evaluateNationalitiesRule(\n        new Set(\n          this.processStepRuleSet.process_step.required_only_if_nationalities ||\n            []\n        ),\n        new Set(move.nationalities || []) as Set<Country>\n      )\n    );\n    results.set(\n      StepRule.ContractLocation,\n      this.evaluateContractOrPayrollLocationRule(\n        this.processStepRuleSet.process_step.required_only_if_contract_location,\n        move.contract_location\n      )\n    );\n    results.set(\n      StepRule.PayrollLocation,\n      this.evaluateContractOrPayrollLocationRule(\n        this.processStepRuleSet.process_step.required_only_if_payroll_location,\n        move.payroll_location\n      )\n    );\n    results.set(\n      StepRule.Duration,\n      this.evaluateDurationRule(\n        this.processStepRuleSet.process_step\n          .required_only_if_duration_greater_than,\n        this.processStepRuleSet.process_step\n          .required_only_if_duration_less_than,\n        dates[0],\n        dates[1]\n      )\n    );\n    return results;\n  }\n\n  evaluateDurationRule(\n    ruleMin: number | undefined,\n    ruleMax: number | undefined,\n    testEntryDate: Date | undefined | null,\n    testExitDate: Date | undefined | null\n  ): RuleEvaluationResult {\n    if (!ruleMin && !ruleMax) {\n      return RuleEvaluationResult.DoesNotApply;\n    } else if (!testEntryDate || !testExitDate) {\n      return RuleEvaluationResult.InsufficientInput;\n    } else {\n      const duration = (+testExitDate - +testEntryDate) / (1000 * 60 * 60 * 24);\n      if (ruleMin && duration < ruleMin) {\n        return RuleEvaluationResult.Fail;\n      } else if (ruleMax && duration > ruleMax) {\n        return RuleEvaluationResult.Fail;\n      } else {\n        return RuleEvaluationResult.Pass;\n      }\n    }\n  }\n\n  evaluateContractOrPayrollLocationRule(\n    ruleLocation: string | undefined,\n    testLocation: string | undefined\n  ): RuleEvaluationResult {\n    if (!ruleLocation) {\n      return RuleEvaluationResult.DoesNotApply;\n    } else if (!testLocation) {\n      return RuleEvaluationResult.InsufficientInput;\n    } else {\n      return ruleLocation == testLocation\n        ? RuleEvaluationResult.Pass\n        : RuleEvaluationResult.Fail;\n    }\n  }\n\n  evaluateNationalitiesRule(\n    ruleNationalities: Set<Country>,\n    testNationalities: Set<Country>\n  ): RuleEvaluationResult {\n    if (ruleNationalities.size === 0) {\n      return RuleEvaluationResult.DoesNotApply;\n    } else if (testNationalities.size === 0) {\n      return RuleEvaluationResult.InsufficientInput;\n    } else {\n      for (const country of testNationalities) {\n        if (ruleNationalities.has(country)) {\n          return RuleEvaluationResult.Pass;\n        }\n      }\n      return RuleEvaluationResult.Fail;\n    }\n  }\n}\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('b-table',{ref:\"table\",attrs:{\"data\":_vm.rows,\"paginated\":_vm.paginated,\"per-page\":10,\"detailed\":\"\"},on:{\"dblclick\":function (row) { return _vm.$emit('dblclick', row); }},scopedSlots:_vm._u([{key:\"detail\",fn:function(props){return [_c('div',{staticClass:\"level\"},[_c('div',{staticClass:\"level-left\"},[_c('process-step-ruleset-list',{attrs:{\"stepRulesets\":props.row.process.step_rulesets,\"move\":_vm.move,\"dates\":_vm.dates}})],1),_c('div',{staticClass:\"level-right\"},[_c('process-steps-gantt',{attrs:{\"steps\":props.row.process.step_rulesets,\"width\":600}})],1)])]}}])},[(_vm.columnSpec.nationalitiesRule)?_c('b-table-column',{attrs:{\"label\":\"Allowed nationalities\",\"td-attrs\":_vm.nationalitiesRuleTdAttrs},scopedSlots:_vm._u([{key:\"default\",fn:function(props){return [_c('b-tooltip',{attrs:{\"type\":\"is-info is-light\",\"position\":\"is-right\",\"multilined\":\"\"},scopedSlots:_vm._u([{key:\"content\",fn:function(){return [_c('span',{staticClass:\"is-size-2\"},[_vm._v(\"🦉\")]),_vm._v(\" \"+_vm._s(_vm.nationalitiesRuleTdAttrs(props.row)._explanation)+\" \")]},proxy:true}],null,true)},[_c('div',[_vm._v(\" \"+_vm._s(props.row.process.nationalities_description || \".\")+\" \")])])]}}],null,false,2990309984)}):_vm._e(),(_vm.columnSpec.durationRule)?_c('b-table-column',{attrs:{\"label\":\"Allowed stay (days)\",\"td-attrs\":_vm.durationRuleTdAttrs},scopedSlots:_vm._u([{key:\"default\",fn:function(props){return [_c('b-tooltip',{attrs:{\"type\":\"is-info is-light\",\"multilined\":\"\"},scopedSlots:_vm._u([{key:\"content\",fn:function(){return [_c('span',{staticClass:\"is-size-2\"},[_vm._v(\"🦉\")]),_vm._v(\" \"+_vm._s(_vm.durationRuleTdAttrs(props.row)._explanation)+\" \")]},proxy:true}],null,true)},[(\n          _vm.durationRuleTdAttrs(props.row)._result ===\n          _vm.RuleEvaluationResult.DoesNotApply\n        )?_c('div',[_vm._v(\" . \")]):(props.row.process.duration_max_days)?_c('div',[_vm._v(\" \"+_vm._s(props.row.process.duration_min_days || 0)+\" - \"+_vm._s(props.row.process.duration_max_days)+\" \")]):_c('div',[_vm._v(_vm._s(props.row.process.duration_min_days)+\"+\")])])]}}],null,false,2673119012)}):_vm._e(),(_vm.columnSpec.contractLocationRule)?_c('b-table-column',{attrs:{\"label\":\"Contract location\",\"td-attrs\":_vm.contractLocationRuleTdAttrs},scopedSlots:_vm._u([{key:\"default\",fn:function(props){return [_c('b-tooltip',{attrs:{\"type\":\"is-info is-light\",\"multilined\":\"\"},scopedSlots:_vm._u([{key:\"content\",fn:function(){return [_c('span',{staticClass:\"is-size-2\"},[_vm._v(\"🦉\")]),_vm._v(\" \"+_vm._s(_vm.contractLocationRuleTdAttrs(props.row)._explanation)+\" \")]},proxy:true}],null,true)},[(\n          _vm.contractLocationRuleTdAttrs(props.row)._result ===\n          _vm.RuleEvaluationResult.DoesNotApply\n        )?_c('div',[_vm._v(\" . \")]):_c('div',[_vm._v(\" \"+_vm._s(props.row.process.contract_location)+\" \")])])]}}],null,false,2492959112)}):_vm._e(),(_vm.columnSpec.payrollLocationRule)?_c('b-table-column',{attrs:{\"label\":\"Payroll location\",\"td-attrs\":_vm.payrollLocationRuleTdAttrs},scopedSlots:_vm._u([{key:\"default\",fn:function(props){return [_c('b-tooltip',{attrs:{\"type\":\"is-info is-light\",\"multilined\":\"\"},scopedSlots:_vm._u([{key:\"content\",fn:function(){return [_c('span',{staticClass:\"is-size-2\"},[_vm._v(\"🦉\")]),_vm._v(\" \"+_vm._s(_vm.payrollLocationRuleTdAttrs(props.row)._explanation)+\" \")]},proxy:true}],null,true)},[(\n          _vm.payrollLocationRuleTdAttrs(props.row)._result ===\n          _vm.RuleEvaluationResult.DoesNotApply\n        )?_c('div',[_vm._v(\" . \")]):_c('div',[_vm._v(\" \"+_vm._s(props.row.process.payroll_location)+\" \")])])]}}],null,false,733849775)}):_vm._e(),(_vm.columnSpec.salaryRule)?_c('b-table-column',{attrs:{\"label\":\"Annual salary requirement\",\"td-attrs\":_vm.salaryRuleTdAttrs},scopedSlots:_vm._u([{key:\"default\",fn:function(props){return [_c('b-tooltip',{attrs:{\"type\":\"is-info is-light\",\"multilined\":\"\"},scopedSlots:_vm._u([{key:\"content\",fn:function(){return [_c('span',{staticClass:\"is-size-2\"},[_vm._v(\"🦉\")]),_vm._v(\" \"+_vm._s(_vm.salaryRuleTdAttrs(props.row)._explanation)+\" \")]},proxy:true}],null,true)},[(\n          _vm.salaryRuleTdAttrs(props.row)._result ===\n          _vm.RuleEvaluationResult.DoesNotApply\n        )?_c('div',[_vm._v(\" . \")]):_c('div',[_vm._v(\" \"+_vm._s(props.row.process.minimum_salary)+\" \"+_vm._s(props.row.process.minimum_salary_currency)+\" \")])])]}}],null,false,4004324300)}):_vm._e(),_c('b-table-column',{attrs:{\"label\":\"\",\"width\":\"50px\",\"td-attrs\":function () { return ({\n        style: {\n          'border-style': 'none',\n        },\n      }); },\"th-attrs\":function () { return ({ style: { 'border-style': 'none' } }); }}},[_c('div')]),(_vm.columnSpec.route)?_c('b-table-column',{attrs:{\"label\":\"Route\",\"td-attrs\":_vm.routeTdAttrs},scopedSlots:_vm._u([{key:\"default\",fn:function(props){return [_c('b-tooltip',{attrs:{\"type\":\"is-info is-light\",\"multilined\":\"\"},scopedSlots:_vm._u([{key:\"content\",fn:function(){return [_c('span',{staticClass:\"is-size-2\"},[_vm._v(\"🦉\")]),_vm._v(\" \"+_vm._s(_vm.routeTdAttrs(props.row)._explanation)+\" \")]},proxy:true}],null,true)},[_c('editable-route',{attrs:{\"route\":props.row.process.route,\"editingSpec\":_vm.caseSpec(props.index, 'route')}})],1)]}}],null,false,606249195)}):_vm._e()],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"content\"},[_c('h1',{staticClass:\"title is-5\"},[_vm._v(\"Steps\")]),_c('ol',_vm._l((_vm.stepRulesets),function(step){return _c('li',{key:step.sequence_number},[_c('b-tooltip',{attrs:{\"type\":\"is-info is-light\",\"multilined\":\"\"},scopedSlots:_vm._u([{key:\"content\",fn:function(){return [_c('span',{staticClass:\"is-size-2\"},[_vm._v(\"🦉\")]),_vm._v(\" \"+_vm._s(_vm.getStepClass(step)._explanation)+\" \")]},proxy:true}],null,true)},[_c('div',{class:_vm.getStepClass(step)._class},[_vm._v(\" \"+_vm._s(step.process_step.name)+\" \")])])],1)}),0)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport Vue, { PropType } from \"vue\";\n\nimport { MoveSerializer } from \"@/autogenerated-interfaces\";\nimport { ProcessStepRuleSet } from \"@/pydantic-autogenerated-interfaces\";\nimport { RuleEvaluationResult } from \"@/immigration/rules/base\";\nimport { StepRule, StepRules } from \"@/immigration/step-rules/base\";\nimport { english as en } from \"@/utils\";\n\nexport default Vue.extend({\n  props: {\n    move: Object as PropType<MoveSerializer>,\n    dates: Array as PropType<Date[]>,\n    stepRulesets: Array as PropType<ProcessStepRuleSet[]>,\n  },\n\n  data() {\n    return {\n      rule2InputFieldName: new Map([\n        [StepRule.Nationalities, \"applicant nationality\"],\n        [StepRule.HomeCountries, \"applicant home country\"],\n        [StepRule.Duration, \"dates\"],\n        [StepRule.ContractLocation, \"contract location\"],\n        [StepRule.PayrollLocation, \"payroll location\"],\n      ]),\n      rule2RuleName: new Map([\n        [StepRule.Nationalities, \"applicant nationality\"],\n        [StepRule.HomeCountries, \"applicant home country\"],\n        [StepRule.Duration, \"duration of stay\"],\n        [StepRule.ContractLocation, \"contract location\"],\n        [StepRule.PayrollLocation, \"payroll location\"],\n      ]),\n    };\n  },\n\n  methods: {\n    /// Return class reflecting result of applying step rules to this step.\n    getStepClass(\n      step: ProcessStepRuleSet\n    ): { _class: string; _explanation: string } {\n      const rules = new StepRules(step);\n      const rule2result = rules.evaluate(this.move, this.dates as [Date, Date]);\n      const result2rules = this._invertMap(rule2result);\n      if (result2rules.has(RuleEvaluationResult.Pass)) {\n        return {\n          _class: \"step-included\",\n          _explanation: `This step is required due a rule regarding ${this.enListRules(\n            result2rules.get(RuleEvaluationResult.Pass) || []\n          )}.`,\n        };\n      } else if (result2rules.has(RuleEvaluationResult.InsufficientInput)) {\n        return {\n          _class: \"step-rule-insufficient-input\",\n          _explanation: `I don't know for sure whether this step will be required because you haven't entered ${this.enListFields(\n            result2rules.get(RuleEvaluationResult.InsufficientInput) || []\n          )}`,\n        };\n      } else if (result2rules.has(RuleEvaluationResult.Fail)) {\n        return {\n          _class: \"step-excluded\",\n          _explanation: `This step is not required (there is a rule regarding ${this.enListRules(\n            result2rules.get(RuleEvaluationResult.Fail) || []\n          )} but your information didn't trigger the requirement).`,\n        };\n      } else {\n        return {\n          _class: \"step-included\",\n          _explanation: \"This step is required.\",\n        };\n      }\n    },\n\n    enListFields(rules: StepRule[]): string {\n      return en.list(\n        rules.map((r) => this.rule2InputFieldName.get(r) as string)\n      );\n    },\n\n    enListRules(rules: StepRule[]): string {\n      return en.list(rules.map((r) => this.rule2RuleName.get(r) as string));\n    },\n\n    _invertMap(rule2result: Map<StepRule, RuleEvaluationResult>) {\n      const result2rules = new Map<RuleEvaluationResult, StepRule[]>();\n      for (const [rule, result] of rule2result.entries()) {\n        if (!result2rules.has(result)) {\n          result2rules.set(result, []);\n        }\n        result2rules.get(result)?.push(rule);\n      }\n      return result2rules;\n    },\n  },\n});\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--14-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ProcessStepRulesetList.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--14-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ProcessStepRulesetList.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./ProcessStepRulesetList.vue?vue&type=template&id=734ef6f5&scoped=true&\"\nimport script from \"./ProcessStepRulesetList.vue?vue&type=script&lang=ts&\"\nexport * from \"./ProcessStepRulesetList.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./ProcessStepRulesetList.vue?vue&type=style&index=0&id=734ef6f5&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"734ef6f5\",\n  null\n  \n)\n\nexport default component.exports","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport Vue, { PropType } from \"vue\";\n\nimport { CaseSerializer, MoveSerializer } from \"@/autogenerated-interfaces\";\nimport EditableRoute from \"../components/EditableRoute.vue\";\nimport ProcessStepRulesetList from \"@/components/ProcessStepRulesetList.vue\";\nimport { CaseSpec, EditingSpec } from \"@/editable-component\";\nimport { RuleEvaluationResult } from \"@/immigration/rules/base\";\nimport ProcessStepsGantt from \"./ProcessStepsGantt.vue\";\n\nexport default Vue.extend({\n  props: {\n    move: Object as PropType<MoveSerializer>,\n    dates: Array as PropType<Date[]>,\n    rows: Array as PropType<CaseSerializer[]>,\n    columnSpec: Object as PropType<CaseSpec>,\n    caseSpecs: Array as PropType<CaseSpec[] | null>,\n    paginated: {\n      type: Boolean,\n      default: false,\n    },\n    contractLocationRuleTdAttrs: {\n      type: Function,\n      default: () => ({}),\n    },\n    durationRuleTdAttrs: {\n      type: Function,\n      default: () => ({}),\n    },\n    nationalitiesRuleTdAttrs: {\n      type: Function,\n      default: () => ({}),\n    },\n    payrollLocationRuleTdAttrs: {\n      type: Function,\n      default: () => ({}),\n    },\n    salaryRuleTdAttrs: {\n      type: Function,\n      default: () => ({}),\n    },\n    routeTdAttrs: {\n      type: Function,\n      default: () => ({}),\n    },\n  },\n  components: {\n    EditableRoute,\n    ProcessStepRulesetList,\n    ProcessStepsGantt,\n  },\n\n  data() {\n    return {\n      RuleEvaluationResult,\n    };\n  },\n\n  methods: {\n    caseSpec(index: number, property: string): EditingSpec {\n      return (\n        (this.caseSpecs &&\n          this.caseSpecs[index] &&\n          ((this.caseSpecs[index] as CaseSpec)[property] as EditingSpec)) || {\n          editable: false,\n          disabled: false,\n        }\n      );\n    },\n  },\n});\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--14-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ProcessRulesetTable.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--14-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ProcessRulesetTable.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./ProcessRulesetTable.vue?vue&type=template&id=38f3d946&\"\nimport script from \"./ProcessRulesetTable.vue?vue&type=script&lang=ts&\"\nexport * from \"./ProcessRulesetTable.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./ProcessRulesetTable.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","export default function _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}","import setPrototypeOf from \"./setPrototypeOf.js\";\nexport default function _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) setPrototypeOf(subClass, superClass);\n}","export default function _getPrototypeOf(o) {\n  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}","export default function _isNativeReflectConstruct() {\n  if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n  if (Reflect.construct.sham) return false;\n  if (typeof Proxy === \"function\") return true;\n\n  try {\n    Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {}));\n    return true;\n  } catch (e) {\n    return false;\n  }\n}","export default function _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}","import _typeof from \"@babel/runtime/helpers/typeof\";\nimport assertThisInitialized from \"./assertThisInitialized.js\";\nexport default function _possibleConstructorReturn(self, call) {\n  if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) {\n    return call;\n  }\n\n  return assertThisInitialized(self);\n}","import getPrototypeOf from \"./getPrototypeOf.js\";\nimport isNativeReflectConstruct from \"./isNativeReflectConstruct.js\";\nimport possibleConstructorReturn from \"./possibleConstructorReturn.js\";\nexport default function _createSuper(Derived) {\n  var hasNativeReflectConstruct = isNativeReflectConstruct();\n  return function _createSuperInternal() {\n    var Super = getPrototypeOf(Derived),\n        result;\n\n    if (hasNativeReflectConstruct) {\n      var NewTarget = getPrototypeOf(this).constructor;\n      result = Reflect.construct(Super, arguments, NewTarget);\n    } else {\n      result = Super.apply(this, arguments);\n    }\n\n    return possibleConstructorReturn(this, result);\n  };\n}","import { IRule, BaseRule, RuleEvaluationResult } from \"./base\";\n\nexport class ContractLocationRule extends BaseRule implements IRule {\n  evaluate(\n    contractLocation: string\n  ): { result: RuleEvaluationResult; explanation: string } {\n    if (!this.isApplicable()) {\n      return {\n        result: RuleEvaluationResult.DoesNotApply,\n        explanation: `This immigration route doesn't have any contract location requirements.`,\n      };\n    } else if (!contractLocation) {\n      return {\n        result: RuleEvaluationResult.InsufficientInput,\n        explanation: `You haven't entered the contract location yet. When you do that, \\\n  I'll apply the contract location rules.`,\n      };\n    } else {\n      const intersects =\n        contractLocation === this.processRuleSet.contract_location;\n      const explanation = `The contract location you entered (${contractLocation}) \\\n${\n  intersects ? \"matches\" : \"does not match\"\n} the required contract location for this immigration route \\\n(${this.processRuleSet.contract_location})`;\n      const result = intersects\n        ? RuleEvaluationResult.Pass\n        : RuleEvaluationResult.Fail;\n      return { result, explanation };\n    }\n  }\n\n  isApplicable(): boolean {\n    return !!this.processRuleSet.contract_location;\n  }\n}\n","import { IRule, BaseRule, RuleEvaluationResult } from \"./base\";\n\nexport class PayrollLocationRule extends BaseRule implements IRule {\n  evaluate(\n    payrollLocation: string\n  ): { result: RuleEvaluationResult; explanation: string } {\n    if (!this.isApplicable()) {\n      return {\n        result: RuleEvaluationResult.DoesNotApply,\n        explanation: `This immigration route doesn't have any payroll location requirements.`,\n      };\n    } else if (!payrollLocation) {\n      return {\n        result: RuleEvaluationResult.InsufficientInput,\n        explanation: `You haven't entered the payroll location yet. When you do that, \\\n  I'll apply the payroll location rules.`,\n      };\n    } else {\n      const intersects =\n        payrollLocation === this.processRuleSet.payroll_location;\n      const explanation = `The payroll location you entered (${payrollLocation}) \\\n${\n  intersects ? \"matches\" : \"does not match\"\n} the required payroll location for this immigration route \\\n(${this.processRuleSet.payroll_location})`;\n      const result = intersects\n        ? RuleEvaluationResult.Pass\n        : RuleEvaluationResult.Fail;\n      return { result, explanation };\n    }\n  }\n\n  isApplicable(): boolean {\n    return !!this.processRuleSet.payroll_location;\n  }\n}\n","import { IRule, BaseRule, RuleEvaluationResult } from \"./base\";\n\nexport class SalaryRule extends BaseRule implements IRule {\n  evaluate(\n    salary: number,\n    salaryCurrency: string\n  ): { result: RuleEvaluationResult; explanation: string } {\n    if (!this.isApplicable()) {\n      return {\n        result: RuleEvaluationResult.DoesNotApply,\n        explanation: `This immigration route doesn't have any salary requirements.`,\n      };\n    } else if (!salary) {\n      return {\n        result: RuleEvaluationResult.InsufficientInput,\n        explanation: `You haven't entered the salary yet. When you do that, \\\n  I'll apply the salary rules.`,\n      };\n    } else {\n      const intersects = salary >= (this.processRuleSet.minimum_salary || 0.0);\n      const explanation = `The salary you entered (${salary} ${salaryCurrency}) \\\n${\n  intersects ? \"satisfies\" : \"does not satisfy\"\n} the minimum salary requirement for this immigration route \\\n(${this.processRuleSet.minimum_salary})`;\n      const result = intersects\n        ? RuleEvaluationResult.Pass\n        : RuleEvaluationResult.Fail;\n      return { result, explanation };\n    }\n  }\n\n  isApplicable(): boolean {\n    return !!this.processRuleSet.minimum_salary;\n  }\n}\n","import { IRule, BaseRule, RuleEvaluationResult } from \"./base\";\nimport { english as en } from \"@/utils\";\n\nexport class DurationRule extends BaseRule implements IRule {\n  evaluate(\n    targetEntryDate: Date,\n    targetExitDate: Date\n  ): { result: RuleEvaluationResult; explanation: string } {\n    if (!this.isApplicable()) {\n      return {\n        result: RuleEvaluationResult.DoesNotApply,\n        explanation: `This immigration route doesn't have any stay length conditions.`,\n      };\n    } else if (targetEntryDate === null || targetExitDate === null) {\n      return {\n        result: RuleEvaluationResult.InsufficientInput,\n        explanation: `You haven't entered your dates yet. When you do that, \\\n  I'll apply the stay length rules.`,\n      };\n    }\n    const duration =\n      (+targetExitDate - +targetEntryDate) / (1000 * 60 * 60 * 24);\n    let minimumText, satisfiesMinimum, maximumText, satisfiesMaximum;\n    if (this.processRuleSet.duration_min_days) {\n      minimumText = `a minimum stay of ${en.q(\n        this.processRuleSet.duration_min_days,\n        \"day\"\n      )}`;\n      satisfiesMinimum = duration >= this.processRuleSet.duration_min_days;\n    } else {\n      minimumText = \"\";\n      satisfiesMinimum = true;\n    }\n    if (this.processRuleSet.duration_max_days) {\n      satisfiesMaximum = duration <= this.processRuleSet.duration_max_days;\n      maximumText = `a maximum stay of ${en.q(\n        this.processRuleSet.duration_max_days,\n        \"day\"\n      )}`;\n    } else {\n      maximumText = \"\";\n      satisfiesMaximum = true;\n    }\n    const intersects = satisfiesMinimum && satisfiesMaximum;\n    const result = intersects\n      ? RuleEvaluationResult.Pass\n      : RuleEvaluationResult.Fail;\n    const explanation = this._formatExplanation(\n      intersects,\n      duration,\n      minimumText,\n      maximumText\n    );\n    return { result, explanation };\n  }\n\n  _formatExplanation(\n    intersects: boolean,\n    duration: number,\n    minimumText: string,\n    maximumText: string\n  ): string {\n    const explanation = [];\n    if (intersects) {\n      explanation.push(\"Your dates are fine for this immigration route: \");\n    } else {\n      explanation.push(\n        \"Your dates are not compatible with this immigration route: \"\n      );\n    }\n    explanation.push(\n      `your dates correspond to a stay of ${duration} days, ${\n        intersects ? \"and\" : \"but\"\n      } the rule stipulates ${[minimumText, maximumText]\n        .filter(Boolean)\n        .join(\" and \")}.`\n    );\n    return explanation.join(\" \");\n  }\n\n  isApplicable(): boolean {\n    const ret =\n      (this.processRuleSet.duration_min_days !== null &&\n        this.processRuleSet.duration_min_days !== undefined) ||\n      (this.processRuleSet.duration_max_days !== null &&\n        this.processRuleSet.duration_max_days !== undefined);\n    return ret;\n  }\n}\n","import { IRule, BaseRule, RuleEvaluationResult } from \"./base\";\nimport { CountrySerializer } from \"../../autogenerated-interfaces\";\n\nexport class NationalitiesRule extends BaseRule implements IRule {\n  evaluate(\n    nationalities: CountrySerializer[],\n    nationalitiesDescription: string\n  ): { result: RuleEvaluationResult; explanation: string } {\n    if (!this.isApplicable()) {\n      return {\n        result: RuleEvaluationResult.DoesNotApply,\n        explanation: `This immigration route is available to all nationalities.`,\n      };\n    } else if (nationalities.length == 0) {\n      return {\n        result: RuleEvaluationResult.InsufficientInput,\n        explanation: `You haven't entered the applicant nationality yet. When you do that, \\\n  I'll apply the nationality rules.`,\n      };\n    } else {\n      const ruleNationalities = new Set(\n        this.processRuleSet.nationalities.map((country) => country.code)\n      );\n      for (const country of nationalities) {\n        if (ruleNationalities.has(country.code)) {\n          return {\n            result: RuleEvaluationResult.Pass,\n            explanation: `The application nationality you've entered (${nationalities.map(\n              (c) => c.name\n            )}) matches one of the nationalities for which this immigration route is available.`,\n          };\n        }\n      }\n      return {\n        result: RuleEvaluationResult.Fail,\n        explanation: `The application nationality you've entered (${nationalities.map(\n          (c) => c.name\n        )}) does not match any of the nationalities for which this immigration route is available (${nationalitiesDescription}).`,\n      };\n    }\n  }\n\n  isApplicable(): boolean {\n    return (\n      this.processRuleSet.nationalities &&\n      this.processRuleSet.nationalities.length > 0\n    );\n  }\n}\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport Vue from \"vue\";\n\nimport \"vue-json-pretty/lib/styles.css\";\n\nimport {\n  ApplicantSerializer,\n  CaseSerializer,\n  CountrySerializer,\n} from \"@/autogenerated-interfaces\";\nimport { ProcessRuleSet } from \"@/pydantic-autogenerated-interfaces\";\nimport Case from \"@/components/Case.vue\";\nimport ProcessRulesetTable from \"@/components/ProcessRulesetTable.vue\";\nimport { CaseSpec } from \"@/editable-component\";\nimport { NullCase, NullMove } from \"@/factories\";\nimport {\n  HomeOrHostCountry,\n  HomeOrHostCountryDisplayName,\n  Rule,\n  RuleEvaluationResult,\n} from \"@/immigration/rules/base\";\nimport { ContractLocationRule } from \"@/immigration/rules/contract-location\";\nimport { PayrollLocationRule } from \"@/immigration/rules/payroll-location\";\nimport { SalaryRule } from \"@/immigration/rules/salary\";\nimport { DurationRule } from \"@/immigration/rules/duration\";\nimport { NationalitiesRule } from \"@/immigration/rules/nationalities\";\nimport { dateToYYYYMMDD, english as en } from \"@/utils\";\nimport eventBus from \"@/event-bus\";\nimport http from \"@/http\";\n\nexport default Vue.extend({\n  components: {\n    Case,\n    ProcessRulesetTable,\n  },\n\n  data() {\n    return {\n      move: NullMove(),\n      caseSpec: {\n        hostCountry: {\n          editable: true,\n          disabled: false,\n        },\n        applicant: {\n          editable: true,\n          disabled: false,\n        },\n        dateRange: {\n          editable: true,\n          disabled: false,\n        },\n        contractLocation: {\n          editable: true,\n          disabled: false,\n        },\n        payrollLocation: {\n          editable: true,\n          disabled: false,\n        },\n        salary: {\n          editable: true,\n          disabled: false,\n        },\n      } as CaseSpec,\n      processRuleSets: [] as CaseSerializer[],\n      processSpec: {\n        route: {\n          editable: false,\n          disabled: false,\n        },\n        // ProcessRuleSet specs\n        contractLocationRule: {\n          editable: true,\n          disabled: false,\n        },\n        durationRule: {\n          editable: false,\n          disabled: false,\n        },\n        nationalitiesRule: {\n          editable: false,\n          disabled: false,\n        },\n        payrollLocationRule: {\n          editable: true,\n          disabled: false,\n        },\n        salaryRule: {\n          editable: true,\n          disabled: false,\n        },\n      } as CaseSpec,\n      targetEntryDate: null as Date | null,\n      targetExitDate: null as Date | null,\n      ruleEvaluationResults: new Map<string, Map<Rule, RuleEvaluationResult>>(),\n      ruleEvaluationResult2CssClass: new Map([\n        [\n          RuleEvaluationResult.InsufficientInput,\n          \"has-background-warning-light\",\n        ],\n        [RuleEvaluationResult.DoesNotApply, \"has-background-success-light\"],\n        [RuleEvaluationResult.Pass, \"has-background-success-light\"],\n        [RuleEvaluationResult.Fail, \"has-background-danger-light\"],\n      ]) as Map<RuleEvaluationResult, string>,\n      rule2InputFieldName: new Map([\n        [Rule.Nationalities, \"applicant nationality\"],\n        [Rule.Duration, \"dates\"],\n        [Rule.ContractLocation, \"contract location\"],\n        [Rule.PayrollLocation, \"payroll location\"],\n        [Rule.Salary, \"salary\"],\n      ]),\n      rule2RuleName: new Map([\n        [Rule.Nationalities, \"applicant nationality\"],\n        [Rule.Duration, \"duration of stay\"],\n        [Rule.ContractLocation, \"contract location\"],\n        [Rule.PayrollLocation, \"payroll location\"],\n        [Rule.Salary, \"salary\"],\n      ]),\n    };\n  },\n\n  created() {\n    // TODO: This global event bus is a bit sketchy. What about if something\n    // else is changing a country for some other reason?\n    eventBus.$on(\"update:country\", this.handleUpdateHostCountry);\n    eventBus.$on(\"update:applicant\", this.handleUpdateApplicant);\n    eventBus.$on(\"update:date-range\", this.handleUpdateDateRange);\n    eventBus.$on(\"update:contract-or-payroll-location\", this.handleUpdateValue);\n    eventBus.$on(\"update:salary\", this.handleUpdateSalary);\n    eventBus.$on(\"update:text\", this.handleUpdateValue);\n  },\n\n  computed: {\n    case_(): CaseSerializer {\n      return Object.assign(NullCase(), { move: this.move });\n    },\n  },\n\n  methods: {\n    async handleUpdateHostCountry(country: CountrySerializer) {\n      this.case_.process.route.host_country = country;\n      this.move.host_country = country;\n      this.fetchProcessRuleSets(country);\n    },\n\n    handleUpdateApplicant(applicant: ApplicantSerializer): void {\n      // TODO: Support selection of nationality independently from applicant\n      this.case_.applicant = applicant;\n      this.move.nationalities = applicant.nationalities;\n      this.triggerProcessRuleSetsIntersectionCalculations();\n    },\n\n    handleUpdateDateRange([entryDate, exitDate]: [Date, Date]): void {\n      // TODO: Should be storing Date internally and serializing only when\n      // sending data externally.\n      this.targetEntryDate = entryDate;\n      this.targetExitDate = exitDate;\n      this.move.target_entry_date = dateToYYYYMMDD(entryDate);\n      this.move.target_exit_date = dateToYYYYMMDD(exitDate);\n      this.triggerProcessRuleSetsIntersectionCalculations();\n    },\n\n    handleUpdateSalary(salary: number): void {\n      this.move.salary = salary;\n      this.triggerProcessRuleSetsIntersectionCalculations();\n    },\n\n    handleUpdateValue(text: string, id: string): void {\n      switch (id) {\n        case \"contract-location\":\n          this.move.contract_location = text;\n          break;\n        case \"payroll-location\":\n          this.move.payroll_location = text;\n          break;\n      }\n      this.triggerProcessRuleSetsIntersectionCalculations();\n    },\n\n    triggerProcessRuleSetsIntersectionCalculations(): void {\n      // Force reactive re-rendering of the process ruleset table so that the\n      // rule calculations are performed and thus the table cells are styled\n      // according to whether the current Move intersects with the rules.\n      this.processRuleSets = [...this.processRuleSets];\n    },\n\n    async fetchProcessRuleSets(country: CountrySerializer): Promise<void> {\n      this.processRuleSets = [];\n      this.ruleEvaluationResults = new Map();\n      const processRuleSets = (await http.fetchDataOrNull(\n        `/api/processruleset/${country.code}`\n      )) as ProcessRuleSet[] | null;\n      if (processRuleSets) {\n        for (const process of processRuleSets) {\n          this.processRuleSets.push(Object.assign(NullCase(), { process }));\n          this.ruleEvaluationResults.set(\n            process.uuid,\n            new Map([\n              [Rule.Nationalities, RuleEvaluationResult.InsufficientInput],\n              [Rule.Duration, RuleEvaluationResult.InsufficientInput],\n              [Rule.ContractLocation, RuleEvaluationResult.InsufficientInput],\n              [Rule.PayrollLocation, RuleEvaluationResult.InsufficientInput],\n              [Rule.Salary, RuleEvaluationResult.InsufficientInput],\n            ])\n          );\n        }\n      }\n    },\n\n    /// Buefy table td-attrs function, see https://buefy.org/documentation/table/#api-view\n    makeProcessRuleSetTdAttrs(): Record<string, (prs: CaseSerializer) => void> {\n      return {\n        contractLocationRuleTdAttrs: this.contractLocationRuleTdAttrs,\n        durationRuleTdAttrs: this.durationRuleTdAttrs,\n        nationalitiesRuleTdAttrs: this.nationalitiesRuleTdAttrs,\n        payrollLocationRuleTdAttrs: this.payrollLocationRuleTdAttrs,\n        salaryRuleTdAttrs: this.salaryRuleTdAttrs,\n        routeTdAttrs: this.routeTdAttrs,\n      };\n    },\n\n    /// Buefy table td-attrs function, see https://buefy.org/documentation/table/#api-view\n    durationRuleTdAttrs(\n      row: CaseSerializer\n    ): Record<string, string | RuleEvaluationResult> {\n      const processRuleSet = (row.process as unknown) as ProcessRuleSet;\n      const rule = new DurationRule(processRuleSet);\n      const { result, explanation } = rule.evaluate(\n        this.targetEntryDate as Date,\n        this.targetExitDate as Date\n      );\n      this.ruleEvaluationResults\n        .get(processRuleSet.uuid)\n        ?.set(Rule.Duration, result);\n      return {\n        class: this.ruleEvaluationResult2CssClass.get(result) as string,\n        _result: result,\n        _explanation: explanation,\n      };\n    },\n\n    /// Buefy table td-attrs function, see https://buefy.org/documentation/table/#api-view\n    nationalitiesRuleTdAttrs(\n      row: CaseSerializer\n    ): Record<string, string | RuleEvaluationResult> {\n      const processRuleSet = (row.process as unknown) as ProcessRuleSet;\n      const rule = new NationalitiesRule(processRuleSet);\n      const { result, explanation } = rule.evaluate(\n        this.move.nationalities || [],\n        processRuleSet.nationalities_description as string\n      );\n      this.ruleEvaluationResults\n        .get(processRuleSet.uuid)\n        ?.set(Rule.Nationalities, result);\n      return {\n        class: this.ruleEvaluationResult2CssClass.get(result) as string,\n        _result: result,\n        _explanation: explanation,\n      };\n    },\n\n    /// Buefy table td-attrs function, see https://buefy.org/documentation/table/#api-view\n    contractLocationRuleTdAttrs(\n      row: CaseSerializer\n    ): Record<string, string | RuleEvaluationResult> {\n      const processRuleSet = (row.process as unknown) as ProcessRuleSet;\n      const rule = new ContractLocationRule(processRuleSet);\n      const { result, explanation } = rule.evaluate(\n        HomeOrHostCountryDisplayName.get(\n          this.move.contract_location as HomeOrHostCountry\n        ) || \"\"\n      );\n      this.ruleEvaluationResults\n        .get(processRuleSet.uuid)\n        ?.set(Rule.ContractLocation, result);\n      return {\n        class: this.ruleEvaluationResult2CssClass.get(result) as string,\n        _result: result,\n        _explanation: explanation,\n      };\n    },\n\n    /// Buefy table td-attrs function, see https://buefy.org/documentation/table/#api-view\n    payrollLocationRuleTdAttrs(\n      row: CaseSerializer\n    ): Record<string, string | RuleEvaluationResult> {\n      const processRuleSet = (row.process as unknown) as ProcessRuleSet;\n      const rule = new PayrollLocationRule(processRuleSet);\n      const { result, explanation } = rule.evaluate(\n        HomeOrHostCountryDisplayName.get(\n          this.move.payroll_location as HomeOrHostCountry\n        ) || \"\"\n      );\n      this.ruleEvaluationResults\n        .get(processRuleSet.uuid)\n        ?.set(Rule.PayrollLocation, result);\n      return {\n        class: this.ruleEvaluationResult2CssClass.get(result) as string,\n        _result: result,\n        _explanation: explanation,\n      };\n    },\n\n    /// Buefy table td-attrs function, see https://buefy.org/documentation/table/#api-view\n    salaryRuleTdAttrs(\n      row: CaseSerializer\n    ): Record<string, string | RuleEvaluationResult> {\n      const processRuleSet = (row.process as unknown) as ProcessRuleSet;\n      const rule = new SalaryRule(processRuleSet);\n      const { result, explanation } = rule.evaluate(\n        this.move.salary || 0.0,\n        this.move.salary_currency || \"<no currency supplied>\"\n      );\n      this.ruleEvaluationResults\n        .get(processRuleSet.uuid)\n        ?.set(Rule.Salary, result);\n      return {\n        class: this.ruleEvaluationResult2CssClass.get(result) as string,\n        _result: result,\n        _explanation: explanation,\n      };\n    },\n\n    /// Buefy table td-attrs function, see https://buefy.org/documentation/table/#api-view\n    routeTdAttrs(\n      row: CaseSerializer\n    ): Record<string, string | RuleEvaluationResult | Record<string, string>> {\n      const processRuleSet = (row.process as unknown) as ProcessRuleSet;\n      const ruleEvaluationResults =\n        this.ruleEvaluationResults.get(processRuleSet.uuid)?.entries() || [];\n      const result2rules = new Map<RuleEvaluationResult, Rule[]>();\n      for (const [rule, result] of ruleEvaluationResults) {\n        if (!result2rules.has(result)) {\n          result2rules.set(result, []);\n        }\n        result2rules.get(result)?.push(rule);\n      }\n      const fail = (result2rules.get(RuleEvaluationResult.Fail) ||\n        []) as Rule[];\n      const insufficientInput = (result2rules.get(\n        RuleEvaluationResult.InsufficientInput\n      ) || []) as Rule[];\n      const pass = (result2rules.get(RuleEvaluationResult.Pass) ||\n        []) as Rule[];\n\n      let _result, _explanation;\n      if (fail.length > 0) {\n        // Input data violates one or more rules.\n        _result = RuleEvaluationResult.Fail;\n        _explanation = `This immigration route is not available because ${en.q(\n          fail.length,\n          \"requirement was\",\n          \"requirements were\"\n        )} not satisfied by the information you've entered: ${this.enListRules(\n          fail\n        )}.`;\n      } else if (insufficientInput.length > 0) {\n        // Input data passes, but there is a field with a rule that the user hasn't filled out.\n        _result = RuleEvaluationResult.InsufficientInput;\n        _explanation = `I don't know for sure whether this immigration route is available \\\nbecause you have not entered the ${this.enListFields(insufficientInput)}.`;\n      } else if (pass.length > 0) {\n        _result = RuleEvaluationResult.Pass;\n        _explanation = `This immigration route is available to you: it has requirements for \\\n${this.enListRules(\n  pass\n)}, and the information you've entered meets those requirements.`;\n      } else {\n        // Input passes vacuously, i.e. this immigration route has no rules.\n        _result = RuleEvaluationResult.Pass;\n        _explanation =\n          \"This immigration route doesn't have any requirements, so it's an option.\";\n      }\n      return {\n        class: this.ruleEvaluationResult2CssClass.get(_result) as string,\n        _result,\n        _explanation,\n        style: {},\n      };\n    },\n    enListFields(rules: Rule[]): string {\n      return en.list(\n        rules.map((r) => this.rule2InputFieldName.get(r) as string)\n      );\n    },\n    enListRules(rules: Rule[]): string {\n      return en.list(rules.map((r) => this.rule2RuleName.get(r) as string));\n    },\n  },\n});\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--14-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Assessment.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--14-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Assessment.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./Assessment.vue?vue&type=template&id=0ad14b18&\"\nimport script from \"./Assessment.vue?vue&type=script&lang=ts&\"\nexport * from \"./Assessment.vue?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}