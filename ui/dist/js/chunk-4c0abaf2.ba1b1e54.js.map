{"version":3,"sources":["webpack:///./src/views/QueryProcesses.vue?bf81","webpack:///./src/views/QueryProcesses.vue","webpack:///./src/views/QueryProcesses.vue?e641","webpack:///./src/views/QueryProcesses.vue?267d","webpack:///./node_modules/@babel/runtime/helpers/esm/arrayWithHoles.js","webpack:///./node_modules/@babel/runtime/helpers/esm/iterableToArrayLimit.js","webpack:///./node_modules/@babel/runtime/helpers/esm/nonIterableRest.js","webpack:///./node_modules/@babel/runtime/helpers/esm/slicedToArray.js"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","_v","attrs","move","moveSpec","staticStyle","matchingProcesses","processSpec","staticRenderFns","extend","components","Case","CaseTable","data","hostCountry","editable","disabled","dateRange","route","created","$on","handleChangeHostCountry","handleInputDateRange","methods","country","console","log","JSON","stringify","process","host_country","moveSerializerData","Object","assign","target_entry_date","target_exit_date","http","postFetchDataOrNull","body","map","entryDate","exitDate","component","_arrayWithHoles","arr","Array","isArray","_iterableToArrayLimit","i","_i","Symbol","iterator","_s","_e","_arr","_n","_d","call","next","done","push","value","length","err","_nonIterableRest","TypeError","_slicedToArray","arrayWithHoles","iterableToArrayLimit","unsupportedIterableToArray","nonIterableRest"],"mappings":"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","file":"js/chunk-4c0abaf2.ba1b1e54.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('section',{staticClass:\"section\"},[_c('h1',{staticClass:\"subtitle\"},[_vm._v(\" Describe your move! Matching immigration options will appear below. \")]),_c('case',{attrs:{\"case_\":_vm.move,\"caseSpec\":_vm.moveSpec,\"showClient\":false}}),_c('h1',{staticClass:\"subtitle mt-6\"},[_vm._v(\"Immigration Options\")]),_c('div',{staticClass:\"card\",staticStyle:{\"overflow\":\"visible\"}},[_c('case-table',{attrs:{\"rows\":_vm.matchingProcesses,\"columnSpec\":_vm.processSpec,\"caseSpecs\":[_vm.processSpec],\"focusable\":false,\"paginated\":false}})],1)],1)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport Vue from \"vue\";\n\nimport \"vue-json-pretty/lib/styles.css\";\n\nimport { CaseSerializer, CountrySerializer } from \"@/autogenerated-interfaces\";\nimport { ProcessSerializer as ImmigrationProcessSerializer } from \"@/autogenerated-interfaces-immigration\";\nimport Case from \"@/components/Case.vue\";\nimport CaseTable from \"@/components/CaseTable.vue\";\nimport { CaseSpec } from \"@/editable-component\";\nimport { NullCase } from \"@/factories\";\nimport { dateToYYYYMMDD } from \"@/utils\";\nimport eventBus from \"@/event-bus\";\nimport http from \"@/http\";\n\nexport default Vue.extend({\n  components: {\n    Case,\n    CaseTable,\n  },\n\n  data() {\n    return {\n      move: NullCase(),\n      moveSpec: {\n        hostCountry: {\n          editable: true,\n          disabled: false,\n        },\n        dateRange: {\n          editable: true,\n          disabled: false,\n        },\n      } as CaseSpec,\n      matchingProcesses: [] as CaseSerializer[],\n      processSpec: {\n        route: {\n          editable: false,\n          disabled: false,\n        },\n      } as CaseSpec,\n    };\n  },\n\n  created() {\n    // TODO: This global event bus is a bit sketchy. What about if something\n    // else is changing a country for some other reason?\n    eventBus.$on(\"update:country\", this.handleChangeHostCountry);\n    eventBus.$on(\"update:date-range\", this.handleInputDateRange);\n  },\n\n  methods: {\n    async handleChangeHostCountry(country: CountrySerializer) {\n      if (!country) {\n        // FIXME: why\n        console.log(\"ERROR: country is\", JSON.stringify(country));\n        return;\n      }\n      this.move.process.route.host_country = country;\n\n      // HACK ------------------------------------\n      /* eslint-disable @typescript-eslint/no-explicit-any */\n\n      const moveSerializerData = Object.assign(\n        { host_country: country },\n        this.move\n      ) as Record<string, any>;\n      if (!moveSerializerData.target_entry_date) {\n        moveSerializerData.target_entry_date = null;\n      }\n      if (!moveSerializerData.target_exit_date) {\n        moveSerializerData.target_exit_date = null;\n      }\n      /* eslint-enable @typescript-eslint/no-explicit-any */\n      // -----------------------------------------\n\n      const matchingProcesses = (await http.postFetchDataOrNull(\n        \"/api/process/query/\",\n        {\n          body: JSON.stringify(moveSerializerData),\n        }\n      )) as ImmigrationProcessSerializer[] | null;\n      if (matchingProcesses) {\n        this.matchingProcesses = matchingProcesses.map((process) =>\n          Object.assign(NullCase(), { process })\n        );\n      }\n    },\n\n    handleInputDateRange([entryDate, exitDate]: [Date, Date]): void {\n      this.move.target_entry_date = dateToYYYYMMDD(entryDate);\n      this.move.target_exit_date = dateToYYYYMMDD(exitDate);\n    },\n  },\n});\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--14-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./QueryProcesses.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--14-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./QueryProcesses.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./QueryProcesses.vue?vue&type=template&id=457a72b8&\"\nimport script from \"./QueryProcesses.vue?vue&type=script&lang=ts&\"\nexport * from \"./QueryProcesses.vue?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","export default function _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}","export default function _iterableToArrayLimit(arr, i) {\n  var _i = arr && (typeof Symbol !== \"undefined\" && arr[Symbol.iterator] || arr[\"@@iterator\"]);\n\n  if (_i == null) return;\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n\n  var _s, _e;\n\n  try {\n    for (_i = _i.call(arr); !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n\n  return _arr;\n}","export default function _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}","import arrayWithHoles from \"./arrayWithHoles.js\";\nimport iterableToArrayLimit from \"./iterableToArrayLimit.js\";\nimport unsupportedIterableToArray from \"./unsupportedIterableToArray.js\";\nimport nonIterableRest from \"./nonIterableRest.js\";\nexport default function _slicedToArray(arr, i) {\n  return arrayWithHoles(arr) || iterableToArrayLimit(arr, i) || unsupportedIterableToArray(arr, i) || nonIterableRest();\n}"],"sourceRoot":""}