(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-93524036"],{3835:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));n("277d");function a(e){if(Array.isArray(e))return e}n("a4d3"),n("e01a"),n("d3b7"),n("d28b"),n("3ca3"),n("ddb0");function o(e,t){var n=e&&("undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null!=n){var a,o,s=[],l=!0,r=!1;try{for(n=n.call(e);!(l=(a=n.next()).done);l=!0)if(s.push(a.value),t&&s.length===t)break}catch(c){r=!0,o=c}finally{try{l||null==n["return"]||n["return"]()}finally{if(r)throw o}}return s}}var s=n("06c5");function l(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function r(e,t){return a(e)||o(e,t)||Object(s["a"])(e,t)||l()}},"838b":function(e,t,n){!function(t,n){e.exports=n()}(0,(function(){return function(){"use strict";var e={16:function(e,t,n){function a(e,t,n,a,o,s,l,r){var c,i="function"==typeof e?e.options:e;if(t&&(i.render=t,i.staticRenderFns=n,i._compiled=!0),a&&(i.functional=!0),s&&(i._scopeId="data-v-"+s),l?(c=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),o&&o.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(l)},i._ssrRegister=c):o&&(c=r?function(){o.call(this,(i.functional?this.parent:this).$root.$options.shadowRoot)}:o),c)if(i.functional){i._injectStyles=c;var u=i.render;i.render=function(e,t){return c.call(t),u(e,t)}}else{var d=i.beforeCreate;i.beforeCreate=d?[].concat(d,c):[c]}return{exports:e,options:i}}n.r(t),n.d(t,{default:function(){return u}});var o=a({props:{data:{required:!0,type:String},collapsedOnClickBrackets:Boolean},methods:{toggleBrackets(e){this.collapsedOnClickBrackets&&this.$emit("click",e)}}},(function(){var e=this,t=e.$createElement;return(e._self._c||t)("span",{staticClass:"vjs-tree__brackets",on:{click:function(t){return t.stopPropagation(),e.toggleBrackets(t)}}},[e._v("\n  "+e._s(e.data)+"\n")])}),[],!1,null,null,null).exports,s=a({props:{checked:{type:Boolean,default:!1},isMultiple:Boolean},data:()=>({focus:!1}),computed:{uiType(){return this.isMultiple?"checkbox":"radio"},model:{get(){return this.checked},set(e){this.$emit("input",e)}}}},(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("label",{class:["vjs-check-controller",e.checked?"is-checked":""],on:{click:function(e){e.stopPropagation()}}},[n("span",{class:"vjs-check-controller__inner is-"+e.uiType}),e._v(" "),"checkbox"===e.uiType?n("input",{directives:[{name:"model",rawName:"v-model",value:e.model,expression:"model"}],class:"vjs-check-controller__original is-"+e.uiType,attrs:{type:"checkbox"},domProps:{checked:Array.isArray(e.model)?e._i(e.model,null)>-1:e.model},on:{change:[function(t){var n=e.model,a=t.target,o=!!a.checked;if(Array.isArray(n)){var s=e._i(n,null);a.checked?s<0&&(e.model=n.concat([null])):s>-1&&(e.model=n.slice(0,s).concat(n.slice(s+1)))}else e.model=o},function(t){return e.$emit("change",e.model)}],focus:function(t){e.focus=!0},blur:function(t){e.focus=!1}}}):"radio"===e.uiType?n("input",{directives:[{name:"model",rawName:"v-model",value:e.model,expression:"model"}],class:"vjs-check-controller__original is-"+e.uiType,attrs:{type:"radio"},domProps:{checked:e._q(e.model,null)},on:{change:[function(t){e.model=null},function(t){return e.$emit("change",e.model)}],focus:function(t){e.focus=!0},blur:function(t){e.focus=!1}}}):n("input",{directives:[{name:"model",rawName:"v-model",value:e.model,expression:"model"}],class:"vjs-check-controller__original is-"+e.uiType,attrs:{type:e.uiType},domProps:{value:e.model},on:{change:function(t){return e.$emit("change",e.model)},focus:function(t){e.focus=!0},blur:function(t){e.focus=!1},input:function(t){t.target.composing||(e.model=t.target.value)}}})])}),[],!1,null,null,null);function l(e){return Object.prototype.toString.call(e).slice(8,-1).toLowerCase()}function r(e,t="root",n=0,{key:a,index:o,type:s="content",showComma:c=!1,length:i=1}={}){const u=l(e);if("array"===u){const o=e.map((e,a,o)=>r(e,`${t}[${a}]`,n+1,{index:a,showComma:a!==o.length-1,length:i,type:s})).flat();return[r("[",t,n,{key:a,length:e.length,type:"arrayStart"})[0]].concat(o,r("]",t,n,{showComma:c,length:e.length,type:"arrayEnd"})[0])}if("object"===u){const l=Object.keys(e),u=l.map((a,o,l)=>r(e[a],a.includes(".")?`${t}["${a}"]`:`${t}.${a}`,n+1,{key:a,showComma:o!==l.length-1,length:i,type:s})).flat();return[r("{",t,n,{key:a,index:o,length:l.length,type:"objectStart"})[0]].concat(u,r("}",t,n,{showComma:c,length:l.length,type:"objectEnd"})[0])}const d=Object.entries({content:e,level:n,key:a,index:o,path:t,showComma:c,length:i,type:s}).reduce((e,[t,n])=>void 0!==n?{...e,[t]:n}:e,{});return"object"===l(d)?[d]:d}var c=a({components:{Brackets:o,CheckController:s.exports},props:{node:{required:!0,type:Object},collapsed:Boolean,collapsedOnClickBrackets:Boolean,showDoubleQuotes:Boolean,showLength:Boolean,checked:Boolean,selectableType:{type:String,default:""},showSelectController:{type:Boolean,default:!1},showLine:{type:Boolean,default:!0},selectOnClickNode:{type:Boolean,default:!0},pathSelectable:{type:Function,default:()=>!0},highlightSelectedNode:{type:Boolean,default:!0},customValueFormatter:{type:Function,default:null}},computed:{valueClass(){return"vjs-value vjs-value__"+this.dataType},dataType(){return l(this.node.content)},prettyKey(){return this.showDoubleQuotes?`"${this.node.key}"`:this.node.key},selectable(){return this.pathSelectable(this.node.path,this.node.content)&&(this.isMultiple||this.isSingle)},isMultiple(){return"multiple"===this.selectableType},isSingle(){return"single"===this.selectableType}},methods:{defaultFormatter(e){let t=e+"";return"string"===this.dataType&&(t=`"${t}"`),t},customFormatter(e){return this.customValueFormatter?this.customValueFormatter(e,this.node.key,this.node.path,this.defaultFormatter(e)):this.defaultFormatter(e)},onBracketsClick(){this.$emit("brackets-click",!this.collapsed,this.node.path)},onCheckedChange(){this.$emit("selected-change",this.node)},onTreeNodeClick(){this.$emit("tree-node-click",this.node),this.selectable&&this.selectOnClickNode&&this.$emit("selected-change",this.node)}}},(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{class:{"vjs-tree__node":!0,"has-selector":e.showSelectController,"is-highlight":e.highlightSelectedNode&&e.checked},on:{click:e.onTreeNodeClick}},[e.showSelectController&&e.selectable&&"objectEnd"!==e.node.type&&"arrayEnd"!==e.node.type?[n("check-controller",{attrs:{"is-multiple":e.isMultiple,checked:e.checked},on:{change:e.onCheckedChange}})]:e._e(),e._v(" "),e._l(e.node.level,(function(t,a){return n("div",{key:a,class:{"vjs-tree__indent":!0,"has-line":e.showLine}})})),e._v(" "),e.node.key?n("span",{staticClass:"vjs-key"},[e._v(" "+e._s(e.prettyKey)+":Â  ")]):e._e(),e._v(" "),n("span",["content"!==e.node.type?n("brackets",{attrs:{data:e.node.content,"collapsed-on-click-brackets":e.collapsedOnClickBrackets},on:{click:e.onBracketsClick}}):[e.customValueFormatter?n("span",{class:e.valueClass,domProps:{innerHTML:e._s(e.customFormatter(e.node.content))}}):n("span",{class:e.valueClass},[e._v(e._s(e.defaultFormatter(e.node.content)))])],e._v(" "),e.node.showComma?n("span",[e._v(",")]):e._e(),e._v(" "),e.showLength&&e.collapsed?n("span",{staticClass:"vjs-comment"},[e._v(" // "+e._s(e.node.length)+" items ")]):e._e()],2)],2)}),[],!1,null,null,null),i=a({name:"VueJsonPretty",components:{TreeNode:c.exports},props:{data:{type:[String,Number,Boolean,Array,Object],default:null},deep:{type:Number,default:1/0},path:{type:String,default:"root"},virtual:{type:Boolean,default:!1},itemHeight:{type:Number,default:20},showLength:{type:Boolean,default:!1},showDoubleQuotes:{type:Boolean,default:!0},selectableType:{type:String,default:""},showSelectController:{type:Boolean,default:!1},showLine:{type:Boolean,default:!0},selectOnClickNode:{type:Boolean,default:!0},value:{type:[Array,String],default:()=>""},pathSelectable:{type:Function,default:()=>!0},highlightSelectedNode:{type:Boolean,default:!0},collapsedOnClickBrackets:{type:Boolean,default:!0},customValueFormatter:{type:Function,default:null}},data(){return{translateY:0,visibleData:null,hiddenPaths:r(this.data,this.path).reduce((e,t)=>"objectStart"!==t.type&&"arrayStart"!==t.type||t.level!==this.deep?e:{...e,[t.path]:1},{})}},computed:{flatData(){let e=null;return r(this.data,this.path).reduce((t,n,a)=>{const o={...n,id:a},s=this.hiddenPaths[o.path];if(e&&e.path===o.path){const n="objectStart"===e.type,a={...e,...o,content:n?"{...}":"[...]",type:n?"objectCollapsed":"arrayCollapsed"};return e=null,t.concat(a)}return s&&!e?(e=o,t):e?t:t.concat(o)},[])},selectedPaths:{get(){return this.value&&"single"===this.selectableType?[this.value]:this.value||[]},set(e){this.$emit("input",e)}},propsError(){return!this.selectableType||this.selectOnClickNode||this.showSelectController?"":"When selectableType is not null, selectOnClickNode and showSelectController cannot be false at the same time, because this will cause the selection to fail."}},watch:{propsError:{handler(e){if(e)throw new Error("[VueJsonPretty] "+e)},immediate:!0},flatData:{handler(){this.onTreeScroll()},immediate:!0}},methods:{onTreeScroll(){if(this.virtual){const e=10,t=this.$refs.tree&&this.$refs.tree.scrollTop||0,n=Math.floor(t/this.itemHeight);let a=n<0?0:n+e>this.flatData.length?this.flatData.length-e:n;a<0&&(a=0);const o=a+e;this.translateY=a*this.itemHeight,this.visibleData=this.flatData.filter((e,t)=>t>=a&&t<o)}else this.visibleData=this.flatData},onSelectedChange({path:e}){const t=this.selectableType;if("multiple"===t){const t=this.selectedPaths.findIndex(t=>t===e),n=[...this.selectedPaths];-1!==t?this.selectedPaths.splice(t,1):this.selectedPaths.push(e),this.$emit("change",this.selectedPaths,n)}else if("single"===t&&this.selectedPaths!==e){const t=this.selectedPaths,n=e;this.selectedPaths=n,this.$emit("change",n,t)}},onTreeNodeClick({content:e,path:t}){this.$emit("click",t,e)},onBracketsClick(e,t){if(e)this.hiddenPaths={...this.hiddenPaths,[t]:1};else{const e={...this.hiddenPaths};delete e[t],this.hiddenPaths=e}}}},(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{ref:"tree",class:{"vjs-tree":!0,"is-virtual":e.virtual},on:{scroll:e.onTreeScroll}},[n("div",{style:e.virtual&&{height:e.flatData.length*e.itemHeight+"px"}},[n("div",{style:e.virtual&&{transform:"translateY("+e.translateY+"px)"}},e._l(e.visibleData,(function(t){return n("tree-node",{key:t.id,attrs:{node:t,collapsed:!!e.hiddenPaths[t.path],"custom-value-formatter":e.customValueFormatter,"show-double-quotes":e.showDoubleQuotes,"show-length":e.showLength,"collapsed-on-click-brackets":e.collapsedOnClickBrackets,checked:e.selectedPaths.includes(t.path),"selectable-type":e.selectableType,"show-line":e.showLine,"show-select-controller":e.showSelectController,"select-on-click-node":e.selectOnClickNode,"path-selectable":e.pathSelectable,"highlight-selected-node":e.highlightSelectedNode},on:{"tree-node-click":e.onTreeNodeClick,"brackets-click":e.onBracketsClick,"selected-change":e.onSelectedChange}})})),1)])])}),[],!1,null,null,null).exports,u=Object.assign({},i,{version:"1.8.0"})}},t={};function n(a){if(t[a])return t[a].exports;var o=t[a]={exports:{}};return e[a](o,o.exports,n),o.exports}return n.d=function(e,t){for(var a in t)n.o(t,a)&&!n.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n(16)}()}))},a388:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("section",{staticClass:"section"},[n("case-form")],1)},o=[],s=n("2b0e"),l=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("section",{staticClass:"section"},[n("case",{attrs:{case_:e.case_,caseSpec:e.caseSpec}}),n("div",{staticClass:"form pt-6"},[n("fieldset",[n("div",{staticClass:"field is-grouped pt-4"},[n("div",{staticClass:"control"},[n("button",{ref:"submitButton",staticClass:"button is-link",on:{click:e.handleSubmit}},[e._v(" Submit ")])])])])]),n("div",[e.validationErrors?n("vue-json-pretty",{staticClass:"mt-4",attrs:{path:"res",data:e.validationErrors}}):e._e()],1)],1)])},r=[],c=n("3835"),i=n("b85c"),u=n("1da1"),d=(n("96cf"),n("d81d"),n("99af"),n("a15b"),n("838b")),h=n.n(d),p=(n("b83f"),n("dcd5")),f=n("035d"),m=n("0abd"),y=n("17fd"),v=n("7dda"),b=n("410c"),g=s["default"].extend({components:{Case:f["a"],VueJsonPretty:h.a},data:function(){return{case_:Object(m["a"])(),processes:[],validationErrors:null,defaultProviderContact:Object(m["d"])()}},created:function(){b["a"].$on("update:applicant",this.handleChangeApplicant),b["a"].$on("update:country",this.handleChangeHostCountry),b["a"].$on("update:date-range",this.handleInputDateRange),b["a"].$on("update:provider-contact",this.handleSelectProviderContact),b["a"].$on("update:process",this.handleChangeProcess)},computed:{caseSpec:function(){return{applicant:{editable:!0,disabled:!1},hostCountry:{editable:!0,disabled:Object(m["f"])(this.case_.applicant)},dateRange:{editable:!0,disabled:Object(m["g"])(this.case_.process.route.host_country)},route:{editable:!0,disabled:!(this.case_.move.target_entry_date&&this.case_.move.target_exit_date)},provider:{editable:!0,disabled:Object(m["i"])(this.case_.process.route)},steps:{provider:{editable:!0,disabled:!1}}}},haveApplicant:function(){return!Object(m["f"])(this.case_.applicant)},haveProcess:function(){return!Object(m["h"])(this.case_.process)}},methods:{handleChangeApplicant:function(e){e?this.case_.applicant=e:console.log("ERROR: applicant is",JSON.stringify(e))},handleChangeHostCountry:function(e){var t=this;return Object(u["a"])(regeneratorRuntime.mark((function n(){var a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(e){n.next=3;break}return console.log("ERROR: country is",JSON.stringify(e)),n.abrupt("return");case 3:if(t.case_.process.route=Object(m["e"])(),t.case_.process.route.host_country=e,t.case_.move.host_country=e,!(t.case_.applicant.nationalities.length>0)){n.next=15;break}return a=t.case_.applicant.nationalities.map((function(e){return e.code})),n.next=10,y["a"].fetchDataOrNull("/api/processes/?host_country=".concat(e.code,"&nationalities=").concat(a.join(",")));case 10:if(n.t0=n.sent,n.t0){n.next=13;break}n.t0=[];case 13:t.processes=n.t0,b["a"].$emit("update:candidate-processes",t.processes);case 15:case"end":return n.stop()}}),n)})))()},handleChangeProcess:function(e){var t=this;this.case_.process=e,this.case_.steps=e.steps.map((function(e,n){return{active_contract:{provider_contact:t.defaultProviderContact},state:{name:"FREE",value:"Waiting for user to notify provider"},actions:[],process_step:e,sequence_number:n+1,stored_files:[]}}));var n=this.$refs.submitButton;this.$nextTick((function(){return n.scrollIntoView()}))},handleSelectProviderContact:function(e){this.defaultProviderContact=e;var t,n=Object(i["a"])(this.case_.steps);try{for(n.s();!(t=n.n()).done;){var a=t.value;a.active_contract.provider_contact=e}}catch(o){n.e(o)}finally{n.f()}},handleInputDateRange:function(e){var t=Object(c["a"])(e,2),n=t[0],a=t[1];this.case_.move.target_entry_date=Object(v["a"])(n),this.case_.move.target_exit_date=Object(v["a"])(a)},handleSubmit:function(){var e=this;return Object(u["a"])(regeneratorRuntime.mark((function t(){var n,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,y["a"].postFetchDataOrNull("/api/client-contact/create-case/",{body:JSON.stringify(e.case_)});case 2:n=t.sent,n&&n["validation-errors"]?e.validationErrors=n["validation-errors"]:(a="Success! Case created for ".concat(e.case_.applicant.user.first_name," ").concat(e.case_.applicant.user.last_name,"."),p["a"].open({message:a,type:"is-success",hasIcon:!0,position:"is-bottom-right"}),e.case_=Object(m["a"])(),e.$router.push("/portal/cases/"));case 4:case"end":return t.stop()}}),t)})))()}}}),_=g,k=n("2877"),C=Object(k["a"])(_,l,r,!1,null,null,null),S=C.exports,w=s["default"].extend({components:{CaseForm:S}}),j=w,O=Object(k["a"])(j,a,o,!1,null,null,null);t["default"]=O.exports},b83f:function(e,t,n){}}]);
//# sourceMappingURL=chunk-93524036.975b0d51.js.map