(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0d0afe67"],{"0538":function(t,e,n){"use strict";var a=n("1c0b"),o=n("861d"),s=[].slice,i={},r=function(t,e,n){if(!(e in i)){for(var a=[],o=0;o<e;o++)a[o]="a["+o+"]";i[e]=Function("C,a","return new C("+a.join(",")+")")}return i[e](t,n)};t.exports=Function.bind||function(t){var e=a(this),n=s.call(arguments,1),i=function(){var a=n.concat(s.call(arguments));return this instanceof i?r(e,a.length,a):e.apply(t,a)};return o(e.prototype)&&(i.prototype=e.prototype),i}},"131a":function(t,e,n){var a=n("23e7"),o=n("d2bb");a({target:"Object",stat:!0},{setPrototypeOf:o})},"1b0f":function(t,e,n){"use strict";n("9439")},3410:function(t,e,n){var a=n("23e7"),o=n("d039"),s=n("7b0b"),i=n("e163"),r=n("e177"),l=o((function(){i(1)}));a({target:"Object",stat:!0,forced:l,sham:!r},{getPrototypeOf:function(t){return i(s(t))}})},3835:function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));n("277d");function a(t){if(Array.isArray(t))return t}n("a4d3"),n("e01a"),n("d3b7"),n("d28b"),n("3ca3"),n("ddb0");function o(t,e){var n=t&&("undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"]);if(null!=n){var a,o,s=[],i=!0,r=!1;try{for(n=n.call(t);!(i=(a=n.next()).done);i=!0)if(s.push(a.value),e&&s.length===e)break}catch(l){r=!0,o=l}finally{try{i||null==n["return"]||n["return"]()}finally{if(r)throw o}}return s}}var s=n("06c5");function i(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function r(t,e){return a(t)||o(t,e)||Object(s["a"])(t,e)||i()}},"46c0":function(t,e,n){},"4ae1":function(t,e,n){var a=n("23e7"),o=n("d066"),s=n("1c0b"),i=n("825a"),r=n("861d"),l=n("7c73"),u=n("0538"),c=n("d039"),p=o("Reflect","construct"),d=c((function(){function t(){}return!(p((function(){}),[],t)instanceof t)})),f=!c((function(){p((function(){}))})),h=d||f;a({target:"Reflect",stat:!0,forced:h,sham:h},{construct:function(t,e){s(t),i(e);var n=arguments.length<3?t:s(arguments[2]);if(f&&!d)return p(t,e,n);if(t==n){switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3])}var a=[null];return a.push.apply(a,e),new(u.apply(t,a))}var o=n.prototype,c=l(r(o)?o:Object.prototype),h=Function.apply.call(t,c,e);return r(h)?h:c}})},7037:function(t,e,n){function a(e){return"function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?(t.exports=a=function(t){return typeof t},t.exports["default"]=t.exports,t.exports.__esModule=!0):(t.exports=a=function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t.exports["default"]=t.exports,t.exports.__esModule=!0),a(e)}n("a4d3"),n("e01a"),n("d3b7"),n("d28b"),n("3ca3"),n("ddb0"),t.exports=a,t.exports["default"]=t.exports,t.exports.__esModule=!0},"8fb9":function(t,e,n){"use strict";n("46c0")},9439:function(t,e,n){},b83f:function(t,e,n){},b8bf:function(t,e,n){var a=n("23e7"),o=n("83ab"),s=n("7c73");a({target:"Object",stat:!0,sham:!o},{create:s})},d716:function(t,e,n){"use strict";n.r(e);var a,o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("section",{staticClass:"section"},[n("h1",{staticClass:"subtitle"},[t._v(" Enter the information for your move. Matching immigration options will appear below. ")]),n("case",{attrs:{case_:t.case_,caseSpec:t.caseSpec,showClient:!1}}),n("br"),n("br"),t.processRuleSets.length>0?n("div",{staticClass:"card mt-6",staticStyle:{overflow:"visible"}},[n("process-ruleset-table",t._b({attrs:{move:t.move,dates:[t.targetEntryDate,t.targetExitDate],rows:t.processRuleSets,columnSpec:t.processSpec,caseSpecs:[t.processSpec],focusable:!1,paginated:!1}},"process-ruleset-table",t.makeProcessRuleSetTdAttrs(),!1))],1):t._e()],1)])},s=[],i=n("b85c"),r=n("2909"),l=n("3835"),u=n("1da1"),c=(n("96cf"),n("4ec9"),n("d3b7"),n("3ca3"),n("ddb0"),n("99af"),n("d81d"),n("2b0e")),p=(n("b83f"),n("035d")),d=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("b-table",{ref:"table",attrs:{data:t.rows,paginated:t.paginated,"per-page":10,detailed:""},on:{dblclick:function(e){return t.$emit("dblclick",e)}},scopedSlots:t._u([{key:"detail",fn:function(e){return[n("div",{staticClass:"level"},[n("div",{staticClass:"level-left"},[n("process-step-ruleset-list",{attrs:{stepRulesets:e.row.process.step_rulesets,move:t.move,dates:t.dates}})],1),n("div",{staticClass:"level-right"},[n("process-steps-gantt",{attrs:{steps:e.row.process.step_rulesets,width:600}})],1)])]}}])},[t.columnSpec.nationalitiesRule?n("b-table-column",{attrs:{label:"Allowed nationalities","td-attrs":t.nationalitiesRuleTdAttrs},scopedSlots:t._u([{key:"default",fn:function(e){return[n("b-tooltip",{attrs:{type:"is-info is-light",position:"is-right",multilined:""},scopedSlots:t._u([{key:"content",fn:function(){return[n("span",{staticClass:"is-size-2"},[t._v("游불")]),t._v(" "+t._s(t.nationalitiesRuleTdAttrs(e.row)._explanation)+" ")]},proxy:!0}],null,!0)},[n("div",[t._v(" "+t._s(e.row.process.nationalities_description||".")+" ")])])]}}],null,!1,2990309984)}):t._e(),t.columnSpec.durationRule?n("b-table-column",{attrs:{label:"Allowed stay (days)","td-attrs":t.durationRuleTdAttrs},scopedSlots:t._u([{key:"default",fn:function(e){return[n("b-tooltip",{attrs:{type:"is-info is-light",multilined:""},scopedSlots:t._u([{key:"content",fn:function(){return[n("span",{staticClass:"is-size-2"},[t._v("游불")]),t._v(" "+t._s(t.durationRuleTdAttrs(e.row)._explanation)+" ")]},proxy:!0}],null,!0)},[t.durationRuleTdAttrs(e.row)._result===t.RuleEvaluationResult.DoesNotApply?n("div",[t._v(" . ")]):e.row.process.duration_max_days?n("div",[t._v(" "+t._s(e.row.process.duration_min_days||0)+" - "+t._s(e.row.process.duration_max_days)+" ")]):n("div",[t._v(t._s(e.row.process.duration_min_days)+"+")])])]}}],null,!1,2673119012)}):t._e(),t.columnSpec.contractLocationRule?n("b-table-column",{attrs:{label:"Contract location","td-attrs":t.contractLocationRuleTdAttrs},scopedSlots:t._u([{key:"default",fn:function(e){return[n("b-tooltip",{attrs:{type:"is-info is-light",multilined:""},scopedSlots:t._u([{key:"content",fn:function(){return[n("span",{staticClass:"is-size-2"},[t._v("游불")]),t._v(" "+t._s(t.contractLocationRuleTdAttrs(e.row)._explanation)+" ")]},proxy:!0}],null,!0)},[t.contractLocationRuleTdAttrs(e.row)._result===t.RuleEvaluationResult.DoesNotApply?n("div",[t._v(" . ")]):n("div",[t._v(" "+t._s(e.row.process.contract_location)+" ")])])]}}],null,!1,2492959112)}):t._e(),t.columnSpec.payrollLocationRule?n("b-table-column",{attrs:{label:"Payroll location","td-attrs":t.payrollLocationRuleTdAttrs},scopedSlots:t._u([{key:"default",fn:function(e){return[n("b-tooltip",{attrs:{type:"is-info is-light",multilined:""},scopedSlots:t._u([{key:"content",fn:function(){return[n("span",{staticClass:"is-size-2"},[t._v("游불")]),t._v(" "+t._s(t.payrollLocationRuleTdAttrs(e.row)._explanation)+" ")]},proxy:!0}],null,!0)},[t.payrollLocationRuleTdAttrs(e.row)._result===t.RuleEvaluationResult.DoesNotApply?n("div",[t._v(" . ")]):n("div",[t._v(" "+t._s(e.row.process.payroll_location)+" ")])])]}}],null,!1,733849775)}):t._e(),t.columnSpec.salaryRule?n("b-table-column",{attrs:{label:"Annual salary requirement","td-attrs":t.salaryRuleTdAttrs},scopedSlots:t._u([{key:"default",fn:function(e){return[n("b-tooltip",{attrs:{type:"is-info is-light",multilined:""},scopedSlots:t._u([{key:"content",fn:function(){return[n("span",{staticClass:"is-size-2"},[t._v("游불")]),t._v(" "+t._s(t.salaryRuleTdAttrs(e.row)._explanation)+" ")]},proxy:!0}],null,!0)},[t.salaryRuleTdAttrs(e.row)._result===t.RuleEvaluationResult.DoesNotApply?n("div",[t._v(" . ")]):n("div",[t._v(" "+t._s(e.row.process.minimum_salary)+" "+t._s(e.row.process.minimum_salary_currency)+" ")])])]}}],null,!1,4004324300)}):t._e(),n("b-table-column",{attrs:{label:"",width:"50px","td-attrs":function(){return{style:{"border-style":"none"}}},"th-attrs":function(){return{style:{"border-style":"none"}}}}},[n("div")]),t.columnSpec.route?n("b-table-column",{attrs:{label:"Route","td-attrs":t.routeTdAttrs},scopedSlots:t._u([{key:"default",fn:function(e){return[n("b-tooltip",{attrs:{type:"is-info is-light",multilined:""},scopedSlots:t._u([{key:"content",fn:function(){return[n("span",{staticClass:"is-size-2"},[t._v("游불")]),t._v(" "+t._s(t.routeTdAttrs(e.row)._explanation)+" ")]},proxy:!0}],null,!0)},[n("editable-route",{attrs:{route:e.row.process.route,editingSpec:t.caseSpec(e.index,"route")}})],1)]}}],null,!1,606249195)}):t._e()],1)},f=[],h=n("a4e2"),y=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"content"},[n("h1",{staticClass:"title is-5"},[t._v("Steps")]),n("ol",t._l(t.stepRulesets,(function(e){return n("li",{key:e.sequence_number},[n("b-tooltip",{attrs:{type:"is-info is-light",multilined:""},scopedSlots:t._u([{key:"content",fn:function(){return[n("span",{staticClass:"is-size-2"},[t._v("游불")]),t._v(" "+t._s(t.getStepClass(e)._explanation)+" ")]},proxy:!0}],null,!0)},[n("div",{class:t.getStepClass(e)._class},[t._v(" "+t._s(e.process_step.name)+" ")])])],1)})),0)])},v=[],_=n("36d5"),b=n("d4ec"),m=n("bee2");n("6062");(function(t){t[t["Nationalities"]=0]="Nationalities",t[t["HomeCountries"]=1]="HomeCountries",t[t["Duration"]=2]="Duration",t[t["ContractLocation"]=3]="ContractLocation",t[t["PayrollLocation"]=4]="PayrollLocation"})(a||(a={}));var R=function(){function t(e){Object(b["a"])(this,t),this.processStepRuleSet=e}return Object(m["a"])(t,[{key:"evaluate",value:function(t,e){var n=new Map;return n.set(a.Nationalities,this.evaluateNationalitiesRule(new Set(this.processStepRuleSet.process_step.required_only_if_nationalities||[]),new Set(t.nationalities||[]))),n.set(a.ContractLocation,this.evaluateContractOrPayrollLocationRule(this.processStepRuleSet.process_step.required_only_if_contract_location,t.contract_location)),n.set(a.PayrollLocation,this.evaluateContractOrPayrollLocationRule(this.processStepRuleSet.process_step.required_only_if_payroll_location,t.payroll_location)),n.set(a.Duration,this.evaluateDurationRule(this.processStepRuleSet.process_step.required_only_if_duration_greater_than,this.processStepRuleSet.process_step.required_only_if_duration_less_than,e[0],e[1])),n}},{key:"evaluateDurationRule",value:function(t,e,n,a){if(t||e){if(n&&a){var o=(+a-+n)/864e5;return t&&o<t||e&&o>e?_["e"].Fail:_["e"].Pass}return _["e"].InsufficientInput}return _["e"].DoesNotApply}},{key:"evaluateContractOrPayrollLocationRule",value:function(t,e){return t?e?t==e?_["e"].Pass:_["e"].Fail:_["e"].InsufficientInput:_["e"].DoesNotApply}},{key:"evaluateNationalitiesRule",value:function(t,e){if(0===t.size)return _["e"].DoesNotApply;if(0===e.size)return _["e"].InsufficientInput;var n,a=Object(i["a"])(e);try{for(a.s();!(n=a.n()).done;){var o=n.value;if(t.has(o))return _["e"].Pass}}catch(s){a.e(s)}finally{a.f()}return _["e"].Fail}}]),t}(),g=n("7dda"),S=c["default"].extend({props:{move:Object,dates:Array,stepRulesets:Array},data:function(){return{rule2InputFieldName:new Map([[a.Nationalities,"applicant nationality"],[a.HomeCountries,"applicant home country"],[a.Duration,"dates"],[a.ContractLocation,"contract location"],[a.PayrollLocation,"payroll location"]]),rule2RuleName:new Map([[a.Nationalities,"applicant nationality"],[a.HomeCountries,"applicant home country"],[a.Duration,"duration of stay"],[a.ContractLocation,"contract location"],[a.PayrollLocation,"payroll location"]])}},methods:{getStepClass:function(t){var e=new R(t),n=e.evaluate(this.move,this.dates),a=this._invertMap(n);return a.has(_["e"].Pass)?{_class:"step-included",_explanation:"This step is required due a rule regarding ".concat(this.enListRules(a.get(_["e"].Pass)||[]),".")}:a.has(_["e"].InsufficientInput)?{_class:"step-rule-insufficient-input",_explanation:"I don't know for sure whether this step will be required because you haven't entered ".concat(this.enListFields(a.get(_["e"].InsufficientInput)||[]))}:a.has(_["e"].Fail)?{_class:"step-excluded",_explanation:"This step is not required (there is a rule regarding ".concat(this.enListRules(a.get(_["e"].Fail)||[])," but your information didn't trigger the requirement).")}:{_class:"step-included",_explanation:"This step is required."}},enListFields:function(t){var e=this;return g["b"].list(t.map((function(t){return e.rule2InputFieldName.get(t)})))},enListRules:function(t){var e=this;return g["b"].list(t.map((function(t){return e.rule2RuleName.get(t)})))},_invertMap:function(t){var e,n=new Map,a=Object(i["a"])(t.entries());try{for(a.s();!(e=a.n()).done;){var o,s=Object(l["a"])(e.value,2),r=s[0],u=s[1];n.has(u)||n.set(u,[]),null===(o=n.get(u))||void 0===o||o.push(r)}}catch(c){a.e(c)}finally{a.f()}return n}}}),w=S,x=(n("1b0f"),n("2877")),A=Object(x["a"])(w,y,v,!1,null,"734ef6f5",null),C=A.exports,T=n("5b9f"),O=c["default"].extend({props:{move:Object,dates:Array,rows:Array,columnSpec:Object,caseSpecs:Array,paginated:{type:Boolean,default:!1},contractLocationRuleTdAttrs:{type:Function,default:function(){return{}}},durationRuleTdAttrs:{type:Function,default:function(){return{}}},nationalitiesRuleTdAttrs:{type:Function,default:function(){return{}}},payrollLocationRuleTdAttrs:{type:Function,default:function(){return{}}},salaryRuleTdAttrs:{type:Function,default:function(){return{}}},routeTdAttrs:{type:Function,default:function(){return{}}}},components:{EditableRoute:h["a"],ProcessStepRulesetList:C,ProcessStepsGantt:T["a"]},data:function(){return{RuleEvaluationResult:_["e"]}},methods:{caseSpec:function(t,e){return this.caseSpecs&&this.caseSpecs[t]&&this.caseSpecs[t][e]||{editable:!1,disabled:!1}}}}),I=O,L=(n("8fb9"),Object(x["a"])(I,d,f,!1,null,null,null)),j=L.exports,k=n("0abd");n("b8bf"),n("131a");function P(t,e){return P=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},P(t,e)}function E(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&P(t,e)}n("4ae1"),n("3410");function D(t){return D=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},D(t)}function N(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}var F=n("7037"),q=n.n(F);function M(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function U(t,e){return!e||"object"!==q()(e)&&"function"!==typeof e?M(t):e}function $(t){var e=N();return function(){var n,a=D(t);if(e){var o=D(this).constructor;n=Reflect.construct(a,arguments,o)}else n=a.apply(this,arguments);return U(this,n)}}var z=function(t){E(n,t);var e=$(n);function n(){return Object(b["a"])(this,n),e.apply(this,arguments)}return Object(m["a"])(n,[{key:"evaluate",value:function(t){if(this.isApplicable()){if(t){var e=t===this.processRuleSet.contract_location,n="The contract location you entered (".concat(t,") ").concat(e?"matches":"does not match"," the required contract location for this immigration route (").concat(this.processRuleSet.contract_location,")"),a=e?_["e"].Pass:_["e"].Fail;return{result:a,explanation:n}}return{result:_["e"].InsufficientInput,explanation:"You haven't entered the contract location yet. When you do that,   I'll apply the contract location rules."}}return{result:_["e"].DoesNotApply,explanation:"This immigration route doesn't have any contract location requirements."}}},{key:"isApplicable",value:function(){return!!this.processRuleSet.contract_location}}]),n}(_["a"]),Y=function(t){E(n,t);var e=$(n);function n(){return Object(b["a"])(this,n),e.apply(this,arguments)}return Object(m["a"])(n,[{key:"evaluate",value:function(t){if(this.isApplicable()){if(t){var e=t===this.processRuleSet.payroll_location,n="The payroll location you entered (".concat(t,") ").concat(e?"matches":"does not match"," the required payroll location for this immigration route (").concat(this.processRuleSet.payroll_location,")"),a=e?_["e"].Pass:_["e"].Fail;return{result:a,explanation:n}}return{result:_["e"].InsufficientInput,explanation:"You haven't entered the payroll location yet. When you do that,   I'll apply the payroll location rules."}}return{result:_["e"].DoesNotApply,explanation:"This immigration route doesn't have any payroll location requirements."}}},{key:"isApplicable",value:function(){return!!this.processRuleSet.payroll_location}}]),n}(_["a"]),H=function(t){E(n,t);var e=$(n);function n(){return Object(b["a"])(this,n),e.apply(this,arguments)}return Object(m["a"])(n,[{key:"evaluate",value:function(t,e){if(this.isApplicable()){if(t){var n=t>=(this.processRuleSet.minimum_salary||0),a="The salary you entered (".concat(t," ").concat(e,") ").concat(n?"satisfies":"does not satisfy"," the minimum salary requirement for this immigration route (").concat(this.processRuleSet.minimum_salary,")"),o=n?_["e"].Pass:_["e"].Fail;return{result:o,explanation:a}}return{result:_["e"].InsufficientInput,explanation:"You haven't entered the salary yet. When you do that,   I'll apply the salary rules."}}return{result:_["e"].DoesNotApply,explanation:"This immigration route doesn't have any salary requirements."}}},{key:"isApplicable",value:function(){return!!this.processRuleSet.minimum_salary}}]),n}(_["a"]),W=(n("a15b"),n("4de4"),function(t){E(n,t);var e=$(n);function n(){return Object(b["a"])(this,n),e.apply(this,arguments)}return Object(m["a"])(n,[{key:"evaluate",value:function(t,e){if(!this.isApplicable())return{result:_["e"].DoesNotApply,explanation:"This immigration route doesn't have any stay length conditions."};if(null===t||null===e)return{result:_["e"].InsufficientInput,explanation:"You haven't entered your dates yet. When you do that,   I'll apply the stay length rules."};var n,a,o,s,i=(+e-+t)/864e5;this.processRuleSet.duration_min_days?(n="a minimum stay of ".concat(g["b"].q(this.processRuleSet.duration_min_days,"day")),a=i>=this.processRuleSet.duration_min_days):(n="",a=!0),this.processRuleSet.duration_max_days?(s=i<=this.processRuleSet.duration_max_days,o="a maximum stay of ".concat(g["b"].q(this.processRuleSet.duration_max_days,"day"))):(o="",s=!0);var r=a&&s,l=r?_["e"].Pass:_["e"].Fail,u=this._formatExplanation(r,i,n,o);return{result:l,explanation:u}}},{key:"_formatExplanation",value:function(t,e,n,a){var o=[];return t?o.push("Your dates are fine for this immigration route: "):o.push("Your dates are not compatible with this immigration route: "),o.push("your dates correspond to a stay of ".concat(e," days, ").concat(t?"and":"but"," the rule stipulates ").concat([n,a].filter(Boolean).join(" and "),".")),o.join(" ")}},{key:"isApplicable",value:function(){var t=null!==this.processRuleSet.duration_min_days&&void 0!==this.processRuleSet.duration_min_days||null!==this.processRuleSet.duration_max_days&&void 0!==this.processRuleSet.duration_max_days;return t}}]),n}(_["a"])),B=(n("b0c0"),function(t){E(n,t);var e=$(n);function n(){return Object(b["a"])(this,n),e.apply(this,arguments)}return Object(m["a"])(n,[{key:"evaluate",value:function(t,e){if(this.isApplicable()){if(0==t.length)return{result:_["e"].InsufficientInput,explanation:"You haven't entered the applicant nationality yet. When you do that,   I'll apply the nationality rules."};var n,a=new Set(this.processRuleSet.nationalities.map((function(t){return t.code}))),o=Object(i["a"])(t);try{for(o.s();!(n=o.n()).done;){var s=n.value;if(a.has(s.code))return{result:_["e"].Pass,explanation:"The application nationality you've entered (".concat(t.map((function(t){return t.name})),") matches one of the nationalities for which this immigration route is available.")}}}catch(r){o.e(r)}finally{o.f()}return{result:_["e"].Fail,explanation:"The application nationality you've entered (".concat(t.map((function(t){return t.name})),") does not match any of the nationalities for which this immigration route is available (").concat(e,").")}}return{result:_["e"].DoesNotApply,explanation:"This immigration route is available to all nationalities."}}},{key:"isApplicable",value:function(){return this.processRuleSet.nationalities&&this.processRuleSet.nationalities.length>0}}]),n}(_["a"])),V=n("410c"),J=n("17fd"),G=c["default"].extend({components:{Case:p["a"],ProcessRulesetTable:j},data:function(){return{move:Object(k["c"])(),caseSpec:{hostCountry:{editable:!0,disabled:!1},applicant:{editable:!0,disabled:!1},dateRange:{editable:!0,disabled:!1},contractLocation:{editable:!0,disabled:!1},payrollLocation:{editable:!0,disabled:!1},salary:{editable:!0,disabled:!1}},processRuleSets:[],processSpec:{route:{editable:!1,disabled:!1},contractLocationRule:{editable:!0,disabled:!1},durationRule:{editable:!1,disabled:!1},nationalitiesRule:{editable:!1,disabled:!1},payrollLocationRule:{editable:!0,disabled:!1},salaryRule:{editable:!0,disabled:!1}},targetEntryDate:null,targetExitDate:null,ruleEvaluationResults:new Map,ruleEvaluationResult2CssClass:new Map([[_["e"].InsufficientInput,"has-background-warning-light"],[_["e"].DoesNotApply,"has-background-success-light"],[_["e"].Pass,"has-background-success-light"],[_["e"].Fail,"has-background-danger-light"]]),rule2InputFieldName:new Map([[_["d"].Nationalities,"applicant nationality"],[_["d"].Duration,"dates"],[_["d"].ContractLocation,"contract location"],[_["d"].PayrollLocation,"payroll location"],[_["d"].Salary,"salary"]]),rule2RuleName:new Map([[_["d"].Nationalities,"applicant nationality"],[_["d"].Duration,"duration of stay"],[_["d"].ContractLocation,"contract location"],[_["d"].PayrollLocation,"payroll location"],[_["d"].Salary,"salary"]])}},created:function(){V["a"].$on("update:country",this.handleUpdateHostCountry),V["a"].$on("update:applicant",this.handleUpdateApplicant),V["a"].$on("update:date-range",this.handleUpdateDateRange),V["a"].$on("update:contract-or-payroll-location",this.handleUpdateValue),V["a"].$on("update:salary",this.handleUpdateSalary),V["a"].$on("update:text",this.handleUpdateValue)},computed:{case_:function(){return Object.assign(Object(k["a"])(),{move:this.move})}},methods:{handleUpdateHostCountry:function(t){var e=this;return Object(u["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:e.case_.process.route.host_country=t,e.move.host_country=t,e.fetchProcessRuleSets(t);case 3:case"end":return n.stop()}}),n)})))()},handleUpdateApplicant:function(t){this.case_.applicant=t,this.move.nationalities=t.nationalities,this.triggerProcessRuleSetsIntersectionCalculations()},handleUpdateDateRange:function(t){var e=Object(l["a"])(t,2),n=e[0],a=e[1];this.targetEntryDate=n,this.targetExitDate=a,this.move.target_entry_date=Object(g["a"])(n),this.move.target_exit_date=Object(g["a"])(a),this.triggerProcessRuleSetsIntersectionCalculations()},handleUpdateSalary:function(t){this.move.salary=t,this.triggerProcessRuleSetsIntersectionCalculations()},handleUpdateValue:function(t,e){switch(e){case"contract-location":this.move.contract_location=t;break;case"payroll-location":this.move.payroll_location=t;break}this.triggerProcessRuleSetsIntersectionCalculations()},triggerProcessRuleSetsIntersectionCalculations:function(){this.processRuleSets=Object(r["a"])(this.processRuleSets)},fetchProcessRuleSets:function(t){var e=this;return Object(u["a"])(regeneratorRuntime.mark((function n(){var a,o,s,r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return e.processRuleSets=[],e.ruleEvaluationResults=new Map,n.next=4,J["a"].fetchDataOrNull("/api/processruleset/".concat(t.code));case 4:if(a=n.sent,a){o=Object(i["a"])(a);try{for(o.s();!(s=o.n()).done;)r=s.value,e.processRuleSets.push(Object.assign(Object(k["a"])(),{process:r})),e.ruleEvaluationResults.set(r.uuid,new Map([[_["d"].Nationalities,_["e"].InsufficientInput],[_["d"].Duration,_["e"].InsufficientInput],[_["d"].ContractLocation,_["e"].InsufficientInput],[_["d"].PayrollLocation,_["e"].InsufficientInput],[_["d"].Salary,_["e"].InsufficientInput]]))}catch(l){o.e(l)}finally{o.f()}}case 6:case"end":return n.stop()}}),n)})))()},makeProcessRuleSetTdAttrs:function(){return{contractLocationRuleTdAttrs:this.contractLocationRuleTdAttrs,durationRuleTdAttrs:this.durationRuleTdAttrs,nationalitiesRuleTdAttrs:this.nationalitiesRuleTdAttrs,payrollLocationRuleTdAttrs:this.payrollLocationRuleTdAttrs,salaryRuleTdAttrs:this.salaryRuleTdAttrs,routeTdAttrs:this.routeTdAttrs}},durationRuleTdAttrs:function(t){var e,n=t.process,a=new W(n),o=a.evaluate(this.targetEntryDate,this.targetExitDate),s=o.result,i=o.explanation;return null===(e=this.ruleEvaluationResults.get(n.uuid))||void 0===e||e.set(_["d"].Duration,s),{class:this.ruleEvaluationResult2CssClass.get(s),_result:s,_explanation:i}},nationalitiesRuleTdAttrs:function(t){var e,n=t.process,a=new B(n),o=a.evaluate(this.move.nationalities||[],n.nationalities_description),s=o.result,i=o.explanation;return null===(e=this.ruleEvaluationResults.get(n.uuid))||void 0===e||e.set(_["d"].Nationalities,s),{class:this.ruleEvaluationResult2CssClass.get(s),_result:s,_explanation:i}},contractLocationRuleTdAttrs:function(t){var e,n=t.process,a=new z(n),o=a.evaluate(_["c"].get(this.move.contract_location)||""),s=o.result,i=o.explanation;return null===(e=this.ruleEvaluationResults.get(n.uuid))||void 0===e||e.set(_["d"].ContractLocation,s),{class:this.ruleEvaluationResult2CssClass.get(s),_result:s,_explanation:i}},payrollLocationRuleTdAttrs:function(t){var e,n=t.process,a=new Y(n),o=a.evaluate(_["c"].get(this.move.payroll_location)||""),s=o.result,i=o.explanation;return null===(e=this.ruleEvaluationResults.get(n.uuid))||void 0===e||e.set(_["d"].PayrollLocation,s),{class:this.ruleEvaluationResult2CssClass.get(s),_result:s,_explanation:i}},salaryRuleTdAttrs:function(t){var e,n=t.process,a=new H(n),o=a.evaluate(this.move.salary||0,this.move.salary_currency||"<no currency supplied>"),s=o.result,i=o.explanation;return null===(e=this.ruleEvaluationResults.get(n.uuid))||void 0===e||e.set(_["d"].Salary,s),{class:this.ruleEvaluationResult2CssClass.get(s),_result:s,_explanation:i}},routeTdAttrs:function(t){var e,n,a=t.process,o=(null===(e=this.ruleEvaluationResults.get(a.uuid))||void 0===e?void 0:e.entries())||[],s=new Map,r=Object(i["a"])(o);try{for(r.s();!(n=r.n()).done;){var u,c=Object(l["a"])(n.value,2),p=c[0],d=c[1];s.has(d)||s.set(d,[]),null===(u=s.get(d))||void 0===u||u.push(p)}}catch(m){r.e(m)}finally{r.f()}var f,h,y=s.get(_["e"].Fail)||[],v=s.get(_["e"].InsufficientInput)||[],b=s.get(_["e"].Pass)||[];return y.length>0?(f=_["e"].Fail,h="This immigration route is not available because ".concat(g["b"].q(y.length,"requirement was","requirements were")," not satisfied by the information you've entered: ").concat(this.enListRules(y),".")):v.length>0?(f=_["e"].InsufficientInput,h="I don't know for sure whether this immigration route is available because you have not entered the ".concat(this.enListFields(v),".")):b.length>0?(f=_["e"].Pass,h="This immigration route is available to you: it has requirements for ".concat(this.enListRules(b),", and the information you've entered meets those requirements.")):(f=_["e"].Pass,h="This immigration route doesn't have any requirements, so it's an option."),{class:this.ruleEvaluationResult2CssClass.get(f),_result:f,_explanation:h,style:{}}},enListFields:function(t){var e=this;return g["b"].list(t.map((function(t){return e.rule2InputFieldName.get(t)})))},enListRules:function(t){var e=this;return g["b"].list(t.map((function(t){return e.rule2RuleName.get(t)})))}}}),K=G,Q=Object(x["a"])(K,o,s,!1,null,null,null);e["default"]=Q.exports}}]);
//# sourceMappingURL=chunk-0d0afe67.f57eef1f.js.map